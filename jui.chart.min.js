!function(a,b){var c={jquery:b},d={},e={template:{evaluate:/<\!([\s\S]+?)\!>/g,interpolate:/<\!=([\s\S]+?)\!>/g,escape:/<\!-([\s\S]+?)\!>/g},logUrl:"tool/debug.html"},f=function(a,b){function c(b,c){var d=a[b];a[b]=a[c],a[c]=d}function d(b,d,f){var g=d,h=a[b];c(b,f);for(var i=d;f>i;i++)(e(a[i],h)||!e(h,a[i])&&i%2==1)&&(c(i,g),g++);return c(f,g),g}var e=null,a=b?a.slice(0):a;this.setCompare=function(a){e=a},this.run=function(b,c){var e=null;return"number"!=typeof b&&(b=0),"number"!=typeof c&&(c=a.length-1),c>b&&(e=b+Math.ceil(.5*(c-b)),newPivot=d(e,b,c),this.run(b,newPivot-1),this.run(newPivot+1,c)),a}},g=function(){this.isIndexDepth=function(a){return"string"==typeof a&&-1!=a.indexOf(".")?!0:!1},this.getIndexList=function(a){var b=[],c=""+a;if(1==c.length)b[0]=parseInt(a);else for(var d=c.split("."),e=0;e<d.length;e++)b[e]=parseInt(d[e]);return b},this.changeIndex=function(a,b,c){for(var d=this.getIndexList(c).length,e=this.getIndexList(a),f=this.getIndexList(b),g=0;d>g;g++)e.shift();return f.concat(e).join(".")},this.getNextIndex=function(a){var b=this.getIndexList(a),c=b.pop()+1;return b.push(c),b.join(".")},this.getParentIndex=function(a){if(!this.isIndexDepth(a))return null;var b=this.getIndexList(a);return 2==b.length?""+b[0]:b.length>2?(b.pop(),b.join(".")):void 0}},h={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,c,d,e,f,g,i,j="",k=0;for(a=h._utf8_encode(a);k<a.length;)b=a.charCodeAt(k++),c=a.charCodeAt(k++),d=a.charCodeAt(k++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,i=63&d,isNaN(c)?g=i=64:isNaN(d)&&(i=64),j=j+h._keyStr.charAt(e)+h._keyStr.charAt(f)+h._keyStr.charAt(g)+h._keyStr.charAt(i);return j},decode:function(a){var b,c,d,e,f,g,i,j="",k=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");k<a.length;)e=h._keyStr.indexOf(a.charAt(k++)),f=h._keyStr.indexOf(a.charAt(k++)),g=h._keyStr.indexOf(a.charAt(k++)),i=h._keyStr.indexOf(a.charAt(k++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|i,j+=String.fromCharCode(b),64!=g&&(j+=String.fromCharCode(c)),64!=i&&(j+=String.fromCharCode(d));return j=h._utf8_decode(j)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b=String.fromCharCode(239)+String.fromCharCode(187)+String.fromCharCode(191),c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}},i=function(a,b,c){var d={},f={},g=Array.prototype,h=g.slice,i=g.forEach,j={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var k in j)j[j[k]]=k;var l=/\\|'|\r|\n|\t|\u2028|\u2029/g,m=/\\(\\|'|r|n|t|u2028|u2029)/g,n=/.^/,o=function(a){return a.replace(m,function(a,b){return j[b]})},p=d.each=d.forEach=function(a,b,c){if(null!=a)if(i&&a.forEach===i)a.forEach(b,c);else if(a.length===+a.length){for(var e=0,g=a.length;g>e;e++)if(e in a&&b.call(c,a[e],e,a)===f)return}else for(var h in a)if(d.has(a,h)&&b.call(c,a[h],h,a)===f)return};return d.has=function(a,b){return hasOwnProperty.call(a,b)},d.defaults=function(a){return p(h.call(arguments,1),function(b){for(var c in b)null==a[c]&&(a[c]=b[c])}),a},d.template=function(a,b,c){c=d.defaults(c||{},e.template);var f="__p+='"+a.replace(l,function(a){return"\\"+j[a]}).replace(c.escape||n,function(a,b){return"'+\n_.escape("+o(b)+")+\n'"}).replace(c.interpolate||n,function(a,b){return"'+\n("+o(b)+")+\n'"}).replace(c.evaluate||n,function(a,b){return"';\n"+o(b)+"\n;__p+='"})+"';\n";c.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+f+"return __p;\n";var g=new Function(c.variable||"obj","_",f);if(b)return g(b,d);var h=function(a){return g.call(this,a,d)};return h.source="function("+(c.variable||"obj")+"){\n"+f+"}",h},d.template(a,b,c)},j=c["util.base"]={browser:{webkit:"undefined"!=typeof window.webkitURL?!0:!1,mozilla:"undefined"!=typeof window.mozInnerScreenX?!0:!1,msie:-1!=navigator.userAgent.indexOf("Trident")?!0:!1},isTouch:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),scrollWidth:function(){var a=b(".jui").size()>0&&this.browser.webkit?!0:!1,c=b('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div></div>');b("body").append(c);var d=b("div",c).innerWidth();c.css("overflow-y","auto");var e=b("div",c).innerWidth();return b(c).remove(),a?10:d-e},inherit:function(a,b){this.typeCheck("function",a)&&this.typeCheck("function",b)&&(a.parent=b,a.prototype=new b,a.prototype.constructor=a,a.prototype.parent=a.prototype)},extend:function(a,b,c){function d(a){return j.typeCheck("object",a)}if(this.typeCheck("object",a)||(a={}),!this.typeCheck("object",b))return a;for(var e in b)c===!0?d(a[e])?this.extend(a[e],b[e],c):this.typeCheck("undefined",a[e])&&(a[e]=b[e]):d(a[e])?this.extend(a[e],b[e],c):a[e]=b[e];return a},pxToInt:function(a){return"string"==typeof a&&-1!=a.indexOf("px")?parseInt(a.split("px").join("")):a},clone:function(a){var c=b.isArray(a)?[]:{};for(var d in a)c[d]=this.typeCheck("object",a[d])?this.clone(a[d]):a[d];return c},deepClone:function(a,b){var c=null;if(b=b||{},this.typeCheck("array",a)){c=new Array(a.length);for(var d=0,e=a.length;e>d;d++)c[d]=this.deepClone(a[d],b)}else if(this.typeCheck("date",a))c=a;else if(this.typeCheck("object",a)){c={};for(var f in a)c[f]=b[f]?a[f]:this.deepClone(a[f],b)}else c=a;return c},sort:function(a){return new f(a)},runtime:function(a,b){var c=(new Date).getTime();b();var d=(new Date).getTime();console.log(a+" : "+(d-c)+"ms")},template:function(a,b){return b?i(a,b):i(a)},resize:function(a,c){var d=function(){var b=0;return function(){clearTimeout(b),b=setTimeout(a,c)}}();b(window).resize(function(){d()})},index:function(){return new g},chunk:function(a,b){for(var c=[],d=0,e=a.length;e>d;)c.push(a.slice(d,d+=b));return c},typeCheck:function(a,b){function c(a,b){return"string"!=typeof a?!1:"string"==a?"string"==typeof b:"integer"==a?"number"==typeof b&&b%1==0:"float"==a?"number"==typeof b&&b%1!=0:"number"==a?"number"==typeof b:"boolean"==a?"boolean"==typeof b:"undefined"==a?"undefined"==typeof b:"null"==a?null===b:"array"==a?b instanceof Array:"date"==a?b instanceof Date:"function"==a?"function"==typeof b:"object"==a?!("object"!=typeof b||null===b||b instanceof Array||b instanceof Date||b instanceof RegExp):!1}if("object"==typeof a&&a.length){for(var d=a,e=0;e<d.length;e++)if(c(d[e],b))return!0;return!1}return c(a,b)},typeCheckObj:function(a,b){if("object"==typeof a){var c=this;for(var d in a){var e=a[d];"function"==typeof e&&!function(d,e){a[d]=function(){for(var a=arguments,f=b[d],g=0;g<a.length;g++)if(!c.typeCheck(f[g],a[g]))throw new Error("JUI_CRITICAL_ERR: the "+g+"th parameter is not a "+f[g]+" ("+name+")");return e.apply(this,a)}}(d,e)}}},dataToCsv:function(a,b,c){for(var d="",e=c?c:b.length,f=-1;e>f;f++){for(var g=[],h=0;h<a.length;h++)a[h]&&g.push(-1==f?a[h]:b[f][a[h]]);d+=g.join(",")+"\n"}return d},dataToCsv2:function(a){for(var c="",d=b.extend({fields:null,rows:null,names:null,count:this.typeCheck("integer",a.count)?a.count:a.rows.length},a),e=-1;e<d.count;e++){for(var f=[],g=0;g<d.fields.length;g++)d.fields[g]&&f.push(-1==e?d.names&&d.names[g]?d.names[g]:d.fields[g]:d.rows[e][d.fields[g]]);c+=f.join(",")+"\n"}return c},fileToCsv:function(a,b){var c=new FileReader;c.onload=function(a){"function"==typeof b&&b(a.target.result)},c.readAsText(a)},csvToBase64:function(a){return"data:application/octet-stream;base64,"+h.encode(a)},csvToData:function(a,c,d){for(var e=[],f=c.split("\n"),g=1;g<f.length;g++)if(""!=f[g]){for(var h=f[g].split(","),i={},j=0;j<a.length;j++)i[a[j]]=h[j],-1!=b.inArray(a[j],d)&&(i[a[j]]=parseFloat(h[j]));e.push(i)}return e},getCsvFields:function(a,b){for(var c=this.typeCheck("array",b)?b:a,d=0;d<c.length;d++)isNaN(c[d])||(c[d]=a[c[d]]);return c},svgToBase64:function(a){return"data:image/svg+xml;base64,"+h.encode(a)},dateFormat:function(a,b,c){function d(a,b){var c=a+"";for(b=b||2;c.length<b;)c="0"+c;return c}var e=["\x00","January","February","March","April","May","June","July","August","September","October","November","December"],f=["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g=["","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["","Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=c?a.getUTCFullYear():a.getFullYear();b=b.replace(/(^|[^\\])yyyy+/g,"$1"+i),b=b.replace(/(^|[^\\])yy/g,"$1"+i.toString().substr(2,2)),b=b.replace(/(^|[^\\])y/g,"$1"+i);var j=(c?a.getUTCMonth():a.getMonth())+1;b=b.replace(/(^|[^\\])MMMM+/g,"$1"+e[0]),b=b.replace(/(^|[^\\])MMM/g,"$1"+f[0]),b=b.replace(/(^|[^\\])MM/g,"$1"+d(j)),b=b.replace(/(^|[^\\])M/g,"$1"+j);var k=c?a.getUTCDate():a.getDate();b=b.replace(/(^|[^\\])dddd+/g,"$1"+g[0]),b=b.replace(/(^|[^\\])ddd/g,"$1"+h[0]),b=b.replace(/(^|[^\\])dd/g,"$1"+d(k)),b=b.replace(/(^|[^\\])d/g,"$1"+k);var l=c?a.getUTCHours():a.getHours();b=b.replace(/(^|[^\\])HH+/g,"$1"+d(l)),b=b.replace(/(^|[^\\])H/g,"$1"+l);var m=l>12?l-12:0==l?12:l;b=b.replace(/(^|[^\\])hh+/g,"$1"+d(m)),b=b.replace(/(^|[^\\])h/g,"$1"+m);var n=c?a.getUTCMinutes():a.getMinutes();b=b.replace(/(^|[^\\])mm+/g,"$1"+d(n)),b=b.replace(/(^|[^\\])m/g,"$1"+n);var o=c?a.getUTCSeconds():a.getSeconds();b=b.replace(/(^|[^\\])ss+/g,"$1"+d(o)),b=b.replace(/(^|[^\\])s/g,"$1"+o);var p=c?a.getUTCMilliseconds():a.getMilliseconds();b=b.replace(/(^|[^\\])fff+/g,"$1"+d(p,3)),p=Math.round(p/10),b=b.replace(/(^|[^\\])ff/g,"$1"+d(p)),p=Math.round(p/10),b=b.replace(/(^|[^\\])f/g,"$1"+p);var q=12>l?"AM":"PM";b=b.replace(/(^|[^\\])TT+/g,"$1"+q),b=b.replace(/(^|[^\\])T/g,"$1"+q.charAt(0));var r=q.toLowerCase();b=b.replace(/(^|[^\\])tt+/g,"$1"+r),b=b.replace(/(^|[^\\])t/g,"$1"+r.charAt(0));var s=-a.getTimezoneOffset(),t=c||!s?"Z":s>0?"+":"-";if(!c){s=Math.abs(s);var u=Math.floor(s/60),v=s%60;t+=d(u)+":"+d(v)}b=b.replace(/(^|[^\\])K/g,"$1"+t);var w=(c?a.getUTCDay():a.getDay())+1;return b=b.replace(new RegExp(g[0],"g"),g[w]),b=b.replace(new RegExp(h[0],"g"),h[w]),b=b.replace(new RegExp(e[0],"g"),e[j]),b=b.replace(new RegExp(f[0],"g"),f[j]),b=b.replace(/\\(.)/g,"$1")},btoa:h.encode,atob:h.decode},k=function(a){for(var b=[],d=0;d<a.length;d++){var e=c[a[d]];if(j.typeCheck(["function","object"],e))b.push(e);else{var f=l(a[d]);if(null==f)throw new Error("JUI_CRITICAL_ERR: '"+a[d]+"' is not loaded");b.push(f)}}return b},l=function(a){var b=null,a=a+".";for(var d in c)if(-1!=d.indexOf(a)&&j.typeCheck(["function","object"],c[d])){var e=d.split(a).join("");-1==e.indexOf(".")&&(null==b&&(b={}),b[e]=c[d])}return b};a.jui={ready:function(){var a=[],c=2==arguments.length?arguments[1]:arguments[0],d=2==arguments.length?arguments[0]:null;if(!j.typeCheck(["array","null"],d)||!j.typeCheck("function",c))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");b(function(){a=d?k(d):[l("ui"),l("uix"),j],c.apply(null,a)})},defineUI:function(a,b,e,f){if(!(j.typeCheck("string",a)&&j.typeCheck("array",b)&&j.typeCheck("function",e)&&j.typeCheck(["string","undefined"],f)))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");if(j.typeCheck("function",c[a]))throw new Error("JUI_CRITICAL_ERR: '"+a+"' is already exist");if(j.typeCheck("undefined",f)&&(f="core"),!j.typeCheck("function",c[f]))throw new Error("JUI_CRITICAL_ERR: Parents are the only function");if(d[f]!==!0)throw new Error("JUI_CRITICAL_ERR: UI function can not be inherited");var g=k(b),h=e.apply(null,g);j.inherit(h,c[f]),c[a]=c.core.init({type:a,"class":h})},define:function(a,b,e,f){if(!(j.typeCheck("string",a)&&j.typeCheck("array",b)&&j.typeCheck("function",e)&&j.typeCheck(["string","undefined"],f)))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");if(j.typeCheck("function",c[a]))throw new Error("JUI_CRITICAL_ERR: '"+a+"' is already exist");var g=k(b),h=e.apply(null,g);if(j.typeCheck("function",c[f])){if(d[f]!==!0)throw new Error("JUI_CRITICAL_ERR: UI function can not be inherited");j.inherit(h,c[f])}c[a]=h,d[a]=!0},defineOptions:function(a,c,d){function e(a,b){if(j.typeCheck("function",a)){if(j.typeCheck("function",a.setup)){var c=a.setup();for(var d in c)j.typeCheck("undefined",b[d])&&(b[d]=c[d])}e(a.parent,b)}return b}for(var f=e(a,{}),g=Object.keys(f),h=Object.keys(c),i=0;i<h.length;i++){var k=h[i];if(-1==b.inArray(k,g)&&-1==b.inArray(k,d))throw new Error("JUI_CRITICAL_ERR: '"+k+"' is not an option")}return j.extend(c,f,!0),c},include:function(a){if(!j.typeCheck("string",a))throw new Error("JUI_CRITICAL_ERR: Invalid parameter type of the function");var b=c[a];if(j.typeCheck(["function","object"],b))return b;var d=l(a);if(null==d)throw new Error("JUI_CRITICAL_ERR: '"+a+"' is not loaded");return d},includeAll:function(){var a=[];for(var b in c)a.push(c[b]);return a},log:function(a){var b=window.open(a||e.logUrl,"JUIM","width=1024, height=768, toolbar=no, menubar=no, resizable=yes");return jui.debugAll(function(a,c){b.log(a,c)}),b},setup:function(a){return j.typeCheck("object",a)&&(e=j.extend(e,a)),e}}}(window,jQuery||$),jui.define("core",["jquery","util.base"],function(a,b){var c=new function(){var d=[],e=[];this.add=function(a){d.push(a)},this.emit=function(a,b,c){for(var e=[],f=0;f<d.length;f++){var g=d[f];(a==g.selector||a==g.type)&&e.push(g)}for(var f=0;f<e.length;f++)for(var g=e[f],h=0;h<g.length;h++)g[h].emit(b,c)},this.get=function(a){if(b.typeCheck("integer",a))return d[a];if(b.typeCheck("string",a)){for(var c=0;c<d.length;c++){var e=d[c];if(a==e.selector)return 1==e.length?e[0]:e}for(var f=[],c=0;c<d.length;c++){var e=d[c];a==e.type&&f.push(e)}return f}},this.getAll=function(){return d},this.remove=function(a){return b.typeCheck("integer",a)?d.splice(a,1)[0]:void 0},this.shift=function(){return d.shift()},this.pop=function(){return d.pop()},this.size=function(){return d.length},this.debug=function(b,c,d,e){if(b.__proto__){var f=["emit","on","addEvent","addValid","callBefore","callAfter","callDelay","setTpl","setVo","setOption"];for(var g in b){var h=b[g];"function"==typeof h&&-1==a.inArray(g,f)&&!function(a,d,f,g){b.__proto__[a]=function(){var b=Date.now(),h=d.apply(this,arguments),i=Date.now();return"function"==typeof e?e({type:jui.get(c).type,name:a,c_index:f,u_index:g,time:i-b},arguments):(console.log(isNaN(f)||isNaN(g)?"NAME("+a+"), TIME("+(i-b)+"ms), ARGUMENTS...":"TYPE("+jui.get(c).type+"), NAME("+a+"), INDEX("+f+":"+g+"), TIME("+(i-b)+"ms), ARGUMENTS..."),console.log(arguments),console.log("")),h}}(g,h,c,d)}}},this.debugAll=function(a){for(var b=0;b<d.length;b++)for(var c=d[b],e=0;e<c.length;e++)this.debug(c[e],b,e,a)},this.addClass=function(a){e.push(a)},this.getClass=function(a){if(b.typeCheck("integer",a))return e[a];if(b.typeCheck("string",a))for(var c=0;c<e.length;c++){if(a==e[c].type)return e[c];if(-1!=e[c].type.indexOf("."+a))return e[c]}return null},this.getClassAll=function(){return e},this.create=function(a,d,e){var f=c.getClass(a);if(b.typeCheck("null",f))throw new Error("JUI_CRITICAL_ERR: '"+a+"' does not exist");return f["class"](d,e)}},d=function(){function c(b){for(var c=["webkit","moz","MS","o",""],d=0;d<c.length;d++){var e=b.type;c[d]||(e=e.toLowerCase()),a(b.target).on(c[d]+e,b.callback)}g.push(b)}function d(b){b.callback&&!b.children?a(b.target).on(b.type,b.callback):a(b.target).on(b.type,b.children,b.callback),g.push(b)}function e(b){b.callback&&!b.children?a(b.target).on(f(b.type),b.callback):a(b.target).on(f(b.type),b.children,b.callback),g.push(b)}function f(a){return{click:"touchstart",dblclick:"touchend",mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"}[a]}var g=[];this.add=function(f){var g={target:f[0],type:f[1]};b.typeCheck("function",f[2])?g=a.extend(g,{callback:f[2]}):b.typeCheck("string",f[2])&&(g=a.extend(g,{children:f[2],callback:f[3]}));for(var h=b.typeCheck("array",g.type)?g.type:[g.type],i=0;i<h.length;i++)g.type=h[i],-1!=g.type.toLowerCase().indexOf("animation")?c(g):("body"!=g.target&&g.target!=window&&a(g.target).off(g.type),b.isTouch?e(g):d(g))},this.trigger=function(c,d){a(c).trigger(b.isTouch?f(d):d)},this.get=function(a){return g[a]},this.getAll=function(){return g},this.size=function(){return g.length}},e=function(a,b,c,d){this.type=a,this.selector=b,this.options=c,this.destroy=function(){for(var a=0;a<d.length;a++)d[a].destroy()};for(var e=0;e<d.length;e++)this.push(d[e])};e.prototype=Object.create(Array.prototype);var f=function(){var c=null;this.emit=function(a,b){if("string"==typeof a){for(var c,d=0;d<this.event.length;d++){var e=this.event[d];if(e.type==a.toLowerCase()){var f="object"==typeof b&&b.length?b:[b];c=e.callback.apply(this,f)}}return c}},this.on=function(a,b){"string"==typeof a&&"function"==typeof b&&this.event.push({type:a.toLowerCase(),callback:b,unique:!1})},this.off=function(a){for(var b=[],c=0;c<this.event.length;c++){var d=this.event[c];("function"==typeof a&&d.callback!=a||"string"==typeof a&&d.type!=a.toLowerCase())&&b.push(d)}this.event=b},this.addEvent=function(){this.listen.add(arguments)},this.addTrigger=function(a,b){this.listen.trigger(a,b)},this.addValid=function(a,c){if(this.__proto__){var d=this.__proto__[a];this.__proto__[a]=function(){for(var e=arguments,f=0;f<e.length;f++)if(!b.typeCheck(c[f],e[f]))throw new Error("JUI_CRITICAL_ERR: the "+f+"th parameter is not a "+c[f]+" ("+a+")");return d.apply(this,e)}}},this.callBefore=function(a,b){if(this.__proto__){var c=this.__proto__[a];this.__proto__[a]=function(){var a=arguments;return"function"!=typeof b?c.apply(this,a):b.apply(this,a)!==!1?c.apply(this,a):void 0}}},this.callAfter=function(a,b){if(this.__proto__){var c=this.__proto__[a];this.__proto__[a]=function(){var a=arguments,d=c.apply(this,a);return"function"==typeof b&&d!==!1&&b.apply(this,a),d}}},this.callDelay=function(a,b){function c(a,c){var e=d.apply(a,c);"function"==typeof b.after&&e!==!1&&b.after.apply(a,c)}if(this.__proto__){var d=this.__proto__[a],e=isNaN(b.delay)?0:b.delay;this.__proto__[a]=function(){var a=this,d=arguments;"function"==typeof b.before&&b.before.apply(a,d),e>0?setTimeout(function(){c(a,d)},e):c(a,d)}}},this.setTpl=function(a,c){this.tpl[a]=b.template(c)},this.setVo=function(){this.options.vo&&(null!=c&&c.reload(),c=a(this.selector).jbinder(),this.bind=c)},this.setOption=function(a,b){if("object"==typeof a)for(var c in a)this.options[c]=a[c];else this.options[a]=b},this.destroy=function(){if(this.__proto__){for(var b=0;b<this.listen.size();b++){var c=this.listen.get(b);a(c.target).off(c.type)}for(var d in this.__proto__)delete this.__proto__[d]}}};return f.build=function(f){return function(g,h){var i=a(g),j=[];return i.each(function(c){var e=new f["class"],k=jui.defineOptions(f["class"],h||{});e.init.prototype=e,e.init.prototype.selector=i.selector,e.init.prototype.root=this,e.init.prototype.options=k,e.init.prototype.tpl={},e.init.prototype.event=new Array,e.init.prototype.listen=new d,e.init.prototype.timestamp=(new Date).getTime(),e.init.prototype.index=c,e.init.prototype.module=f,a("script").each(function(){if(g==a(this).data("jui")||g==a(this).data("vo")){var b=a(this).data("tpl");if(""==b)throw new Error("JUI_CRITICAL_ERR: 'data-tpl' property is required");k.tpl[b]=a(this).html()}});for(var l in k.tpl){var m=k.tpl[l];b.typeCheck("string",m)&&""!=m&&(e.init.prototype.tpl[l]=b.template(m))}var n=new e.init;for(var o in k.event)n.on(o,k.event[o]);j[c]=n,this.jui=n}),c.add(new e(f.type,g,h,j)),0==j.length?null:1==j.length?j[0]:j}},f.init=function(a){var b=null;return"object"==typeof a&&(b=f.build(a),c.addClass({type:a.type,"class":b})),b},f.setup=function(){return{tpl:{},event:{},vo:null}},window.jui="object"==typeof jui?a.extend(jui,c):c,f}),jui.define("util.math",[],function(){var a={rotate:function(a,b,c){return{x:a*Math.cos(c)-b*Math.sin(c),y:a*Math.sin(c)+b*Math.cos(c)}},radian:function(a){return a*Math.PI/180},degree:function(a){return 180*a/Math.PI},interpolateNumber:function(a,b){return function(c){return a+(b-a)*c}},interpolateRound:function(a,b){var c=this.interpolateNumber(a,b);return function(a){return Math.round(c(a))}},nice:function(a,b,c,d){function e(a,b){var c=Math.floor(Math.log(a)/Math.LN10),d=a/Math.pow(10,c);return niceFraction=b?1.5>d?1:3>d?2:7>d?5:10:1>=d?1:2>=d?2:5>=d?5:10,niceFraction*Math.pow(10,c)}function f(){m=d?e(g-h,!1):g-h,l=d?e(m/k,!0):m/k,i=d?Math.floor(h/l)*l:h,j=d?Math.floor(g/l)*l:g}if(d=d||!1,a>b)var g=a,h=b;else var h=a,g=b;var i,j,k=c,l=0,m=[];return f(),{min:i,max:j,range:m,spacing:l}}};return a}),jui.define("util.time",["util.base"],function(a){var b={years:1,months:2,days:3,hours:4,minutes:5,seconds:6,milliseconds:7,weeks:8,add:function(a){if(arguments.length<=2)return a;if(arguments.length>2){for(var b=new Date(+a),c=1;c<arguments.length;c+=2){var d=arguments[c],e=arguments[c+1];this.years==d?b.setFullYear(b.getFullYear()+e):this.months==d?b.setMonth(b.getMonth()+e):this.days==d?b.setDate(b.getDate()+e):this.hours==d?b.setHours(b.getHours()+e):this.minutes==d?b.setMinutes(b.getMinutes()+e):this.seconds==d?b.setSeconds(b.getSeconds()+e):this.milliseconds==d?b.setMilliseconds(b.getMilliseconds()+e):this.weeks==d&&b.setDate(b.getDate()+7*e)}return b}},format:function(b,c,d){return a.dateFormat(b,c,d)}};return b}),jui.define("util.scale",["util.math","util.time"],function(a,b){var c={circle:function(){function a(){}var b=[],c=[],d=0;return a.domain=function(a){if("undefined"==typeof a)return b;for(var c=0;c<a.length;c++)b[c]=a[c];return this},a.range=function(a){if("undefined"==typeof a)return c;for(var b=0;b<a.length;b++)c[b]=a[b];return this},a.rangePoints=function(e,f){f=f||0;for(var g=b.length,h=(e[1]-e[0]-f)/g,i=[],j=0;j<b.length;j++)i[j]=0==j?e[0]+f/2+h/2:i[j-1]+h;return c=i,d=h,a},a.rangeBands=function(e,f,g){f=f||0,g=g||0;for(var h=b.length,i=h-1,j=(e[1]-e[0])/i,k=[],l=0;l<b.length;l++)k[l]=0==l?e[0]:j+k[l-1];return d=j,c=k,a},a.rangeBand=function(){return d},a},ordinal:function(){function a(a){var d=""+a;if("undefined"!=typeof e[d])return e[d];for(var f=-1,g=0;g<b.length;g++)if("string"==typeof a&&b[g]===a){f=g;break}return f>-1?(e[d]=c[f],c[f]):"undefined"!=typeof c[a]?(b[a]=a,e[d]=c[a],c[a]):null}var b=[],c=[],d=0,e={};return a.domain=function(a){if("undefined"==typeof a)return b;for(var c=0;c<a.length;c++)b[c]=a[c];return this},a.range=function(a){if("undefined"==typeof a)return c;for(var b=0;b<a.length;b++)c[b]=a[b];return this},a.rangePoints=function(e,f){f=f||0;for(var g=b.length,h=(e[1]-e[0]-f)/g,i=[],j=0;j<b.length;j++)i[j]=0==j?e[0]+f/2+h/2:i[j-1]+h;return c=i,d=h,a},a.rangeBands=function(e,f,g){f=f||0,g=g||0;for(var h=b.length,i=h-1,j=(e[1]-e[0])/i,k=[],l=0;l<b.length;l++)k[l]=0==l?e[0]:j+k[l-1];return d=j,c=k,a},a.rangeBand=function(){return d},a.invert=function(a){return Math.ceil(a/d)},a},time:function(){var a,d=[],e=c.linear(),f=e.domain;return e.domain=function(a){if(!arguments.length)return f.call(e);for(var b=0;b<a.length;b++)d[b]=+a[b];return f.call(e,d)},e.min=function(){return Math.min(d[0],d[d.length-1])},e.max=function(){return Math.max(d[0],d[d.length-1])},e.rate=function(a,b){return e(e.max()*(a/b))},e.ticks=function(c,d){for(var f=e.min(),g=e.max(),h=[];g>f;)h.push(new Date(+f)),f=b.add(f,c,d);h.push(new Date(+f));var i=e(h[0]),j=e(h[1]);return a=j-i,h},e.realTicks=function(c,f){var g=d[0],h=d[1],i=[],j=new Date(+g),k=null;for(c==b.years?k=new Date(j.getFullYear(),0,1):c==b.months?k=new Date(j.getFullYear(),j.getMonth(),1):c==b.days||c==b.weeks?k=new Date(j.getFullYear(),j.getMonth(),j.getDate()):c==b.hours?k=new Date(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),0,0,0):c==b.minutes?k=new Date(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),j.getMinutes(),0,0):c==b.seconds?k=new Date(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),j.getMinutes(),j.getSeconds(),0):c==b.milliseconds&&(k=new Date(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),j.getMinutes(),j.getSeconds(),j.getMilliseconds())),k=b.add(k,c,f);+h>+k;)i.push(new Date(+k)),k=b.add(k,c,f);var l=e(i[1]),m=e(i[2]);return a=m-l,i},e.rangeBand=function(){return a},e.invert=function(a){var b=c.linear().domain(e.range()).range(e.domain());return new Date(b(a))},e},linear:function(){function b(a){var c=a+"";if("undefined"!=typeof h[c])return h[c];b.max(),b.min();if(a>l)return g?(h[c]=l,l):(h[c]=e[0]+Math.abs(a-l)*o/p,h[c]);if(k>a)return g?(h[c]=k,k):(h[c]=e[0]-Math.abs(a-k)*o/p,h[c]);var d=(a-k)/o,m=f?i:j;return h[c]=m(d),h[c]}var d=[0,1],e=[0,1],f=!1,g=!1,h={},i=null,j=null,k=null,l=null,m=null,n=null,o=null,p=null;return b.min=function(){return Math.min.apply(Math,d)},b.max=function(){return Math.max.apply(Math,d)},b.rangeMin=function(){return Math.min.apply(Math,e)},b.rangeMax=function(){return Math.max.apply(Math,e)},b.rate=function(a,c){return b(b.max()*(a/c))},b.clamp=function(a){g=a||!1},b.domain=function(a){if(!arguments.length)return d;for(var c=0;c<a.length;c++)d[c]=a[c];return k=b.min(),l=b.max(),o=Math.abs(l-k),this},b.range=function(c){if(!arguments.length)return e;for(var d=0;d<c.length;d++)e[d]=c[d];return i=a.interpolateRound(e[0],e[1]),j=a.interpolateNumber(e[0],e[1]),m=b.rangeMin(),n=b.rangeMax(),p=Math.abs(n-m),this},b.rangeRound=function(a){return f=!0,b.range(a)},b.invert=function(a){var b=c.linear().domain(e).range(d);return b(a)},b.ticks=function(b,c,e){if(e=e||1e4,0==d[0]&&0==d[1])return[];for(var f=a.nice(d[0],d[1],b||10,c||!1),g=[],h=f.min*e,i=f.max*e;i>=h;)g.push(h/e),h+=f.spacing*e;return g[g.length-1]*e!=i&&h>i&&g.push(i/e),g},b}};return c}),jui.define("util.color",[],function(){var a={regex:/(linear|radial)\((.*)\)(.*)/i,trim:function(a){return(a||"").replace(/^\s+|\s+$/g,"")},parse:function(a){return this.parseGradient(a)},parseGradient:function(a){var b=a.match(this.regex);if(!b)return a;var c=this.trim(b[1]),d=this.parseAttr(c,this.trim(b[2])),e=this.parseStop(this.trim(b[3])),f={type:c};for(var g in d)f[g]=d[g];return f.stops=e,f},parseStop:function(a){for(var b=a.split(","),c=[],d=0,e=b.length;e>d;d++){var a=b[d],f=a.split(" ");0!=f.length&&(1==f.length?c.push({"stop-color":f[0]}):2==f.length?c.push({offset:f[0],"stop-color":f[1]}):3==f.length&&c.push({offset:f[0],"stop-color":f[1],"stop-opacity":f[2]}))}for(var g=-1,h=-1,d=0,e=c.length;e>d;d++){var a=c[d];if(0==d?a.offset||(a.offset=0):d==e-1&&(a.offset||(a.offset=1)),-1==g&&"undefined"==typeof a.offset)g=d;else if(-1==h&&"undefined"==typeof a.offset){h=d;for(var i=h-g,j=c[h].offset.indexOf("%")>-1?parseFloat(c[h].offset)/100:c[h].offset,k=c[g].offset.indexOf("%")>-1?parseFloat(c[g].offset)/100:c[g].offset,l=j-k,m=l/i,n=k+m,o=g+1;h>o;o++)c[o].offset=n,n+=m;g=h,h=-1}}return c},parseAttr:function(a,b){if("linear"!=a){for(var c=b.split(","),d=0,e=c.length;e>d;d++)-1==c[d].indexOf("%")&&(c[d]=parseFloat(c[d]));return{cx:c[0],cy:c[1],r:c[2],fx:c[3],fy:c[4]}}switch(b){case"":case"left":return{x1:0,y1:0,x2:1,y2:0,direction:b||"left"};case"right":return{x1:1,y1:0,x2:0,y2:0,direction:b};case"top":return{x1:0,y1:0,x2:0,y2:1,direction:b};case"bottom":return{x1:0,y1:1,x2:0,y2:0,direction:b};case"top left":return{x1:0,y1:0,x2:1,y2:1,direction:b};case"top right":return{x1:1,y1:0,x2:0,y2:1,direction:b};case"bottom left":return{x1:0,y1:1,x2:1,y2:0,direction:b};case"bottom right":return{x1:1,y1:1,x2:0,y2:0,direction:b};default:for(var c=b.split(","),d=0,e=c.length;e>d;d++)-1==c[d].indexOf("%")&&(c[d]=parseFloat(c[d]));return{x1:c[0],y1:c[1],x2:c[2],y2:c[3]}}}};return a}),jui.define("util.svg.element",[],function(){var a=function(){this.create=function(a,b){this.element=document.createElementNS("http://www.w3.org/2000/svg",a),this.childrens=[],this.parent=null,this.attributes={},this.styles={},this.attr(b)},this.each=function(a){if("function"==typeof a){for(var b=0;b<this.childrens.length;b++){var c=this.childrens[b];a.apply(c,[b,c])}return this.childrens}},this.get=function(a){return this.childrens[a]?this.childrens[a]:null},this.index=function(a){for(var b=0;b<this.childrens.length;b++)if(a==this.childrens[b])return b;return-1},this.append=function(a){return a.parent&&a.remove(),this.childrens.push(a),a.parent=this,this},this.prepend=function(a){return this.insert(0,a)},this.insert=function(a,b){return b.parent&&b.remove(),this.childrens.splice(a,0,b),b.parent=this,this},this.remove=function(){for(var a=0,b=[],c=this.parent.childrens,d=0;d<c.length;d++){if(c[d]==this){a=d;break}b.push(c[d])}return this.parent.childrens=b,this},this.attr=function(a){if("string"==typeof a)return this.element.getAttribute(a);for(var b in a)this.attributes[b]=a[b],-1!=b.indexOf("xlink:")?this.element.setAttributeNS("http://www.w3.org/1999/xlink",b,this.attributes[b]):this.element.setAttributeNS(null,b,this.attributes[b]);return this},this.css=function(a){var b=[];for(var c in a)this.styles[c]=a[c];for(var c in this.styles)b.push(c+":"+this.styles[c]);return this.attr({style:b.join(";")}),this},this.html=function(a){return this.element.innerHTML=a,this},this.text=function(a){return this.element.appendChild(document.createTextNode(a)),this},this.on=function(a,b){return this.element.addEventListener(a,function(a){"function"==typeof b&&b.call(this,a)},!1),this},this.hover=function(a,b){return this.element.addEventListener("mouseover",function(b){"function"==typeof a&&a.call(this,b)},!1),this.element.addEventListener("mouseout",function(a){"function"==typeof b&&b.call(this,a)},!1),this},this.size=function(){var a={width:0,height:0},b=this.element.getBoundingClientRect();if(!b||0==b.width&&0==b.height){for(var c=["height","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"],d=["width","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],e=window.getComputedStyle(this.element),f=0;f<c.length;f++)a.height+=parseFloat(e[c[f]]);for(var f=0;f<d.length;f++)a.width+=parseFloat(e[d[f]])}else a.width=b.width,a.height=b.height;return isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a}};return a}),jui.define("util.svg.element.transform",[],function(){var a=function(){function a(a){var b=[];for(var d in c)c[d]&&b.push(c[d]);a.attr({transform:b.join(" ")})}function b(a){for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b.join(",")}var c={};this.translate=function(){return c.translate="translate("+b(arguments)+")",a(this),this},this.rotate=function(b,d,e){if(1==arguments.length)var f=b;else if(3==arguments.length)var f=b+" "+d+","+e;return c.rotate="rotate("+f+")",a(this),this},this.scale=function(){return c.scale="scale("+b(arguments)+")",a(this),this},this.skew=function(){return c.skew="skew("+b(arguments)+")",a(this),this},this.matrix=function(){return c.matrix="matrix("+b(arguments)+")",a(this),this}};return a},"util.svg.element"),jui.define("util.svg.element.path",[],function(){var a=function(){function a(a){if(c.length>0)a.attr({d:c});else{if(0==b.length)return;a.attr({d:b.join(" ")})}}var b=[],c="";this.moveTo=function(a,c,d){return b.push((d||"m")+a+","+c),this},this.MoveTo=function(a,b){return this.moveTo(a,b,"M")},this.lineTo=function(a,c,d){return b.push((d||"l")+a+","+c),this},this.LineTo=function(a,b){return this.lineTo(a,b,"L")},this.hLineTo=function(a,c){return b.push((c||"h")+a),this},this.HLineTo=function(a){return this.hLineTo(a,"H")},this.vLineTo=function(a,c){return b.push((c||"v")+a),this},this.VLineTo=function(a){return this.vLineTo(a,"V")},this.curveTo=function(a,c,d,e,f,g,h){return b.push((h||"c")+a+","+c+" "+d+","+e+" "+f+","+g),this},this.CurveTo=function(a,b,c,d,e,f){return this.curveTo(a,b,c,d,e,f,"C")},this.sCurveTo=function(a,c,d,e,f){return b.push((f||"s")+a+","+c+" "+d+","+e),this},this.SCurveTo=function(a,b,c,d){return this.sCurveTo(a,b,c,d,"S")},this.qCurveTo=function(a,c,d,e,f){return b.push((f||"q")+a+","+c+" "+d+","+e),this
},this.QCurveTo=function(a,b,c,d){return this.qCurveTo(a,b,c,d,"Q")},this.tCurveTo=function(a,c,d,e,f){return b.push((f||"t")+a+","+c+" "+d+","+e),this},this.TCurveTo=function(a,b,c,d){return this.tCurveTo(a,b,c,d,"T")},this.arc=function(a,c,d,e,f,g,h,i){return e=e?1:0,f=f?1:0,b.push((i||"a")+a+","+c+" "+d+" "+e+","+f+" "+g+","+h),this},this.Arc=function(a,b,c,d,e,f,g){return this.arc(a,b,c,d,e,f,g,"A")},this.closePath=function(a){return b.push(a||"z"),this},this.ClosePath=function(){return this.closePath("Z")},this.join=function(){a(this)},this.getSymbolTemplate=function(a,b){var c=a,d=half_r=a/2,e=b/2,f="a"+half_r+","+half_r+" 0 1,1 "+c+",0",g="a"+half_r+","+half_r+" 0 1,1 "+-c+",0",h={triangle:["m0,"+-e,"l"+d+","+b,"l"+-a+",0","l"+d+","+-b].join(" "),rect:["m"+-d+","+-e,"l"+a+",0","l0,"+b,"l"+-a+",0","l0,"+-b].join(" "),cross:["m"+-d+","+-e,"l"+a+","+b,"m0,"+-b,"l"+-a+","+b].join(" "),circle:["m"+-c+",0",f,g].join(" ")};return h.rectangle=h.rect,h},this.template=function(a,c,d){b.push(" M"+a+","+c+d)},this.triangle=function(a,b,c,d){return this.MoveTo(a,b).moveTo(0,-d/2).lineTo(c/2,d).lineTo(-c,0).lineTo(c/2,-d)},this.rect=this.rectangle=function(a,b,c,d){return this.MoveTo(a,b).moveTo(-c/2,-d/2).lineTo(c,0).lineTo(0,d).lineTo(-c,0).lineTo(0,-d)},this.cross=function(a,b,c,d){return this.MoveTo(a,b).moveTo(-c/2,-d/2).lineTo(c,d).moveTo(0,-d).lineTo(-c,d)},this.circle=function(a,b,c){return this.MoveTo(a,b).moveTo(-c,0).arc(c/2,c/2,0,1,1,c,0).arc(c/2,c/2,0,1,1,-c,0)}};return a},"util.svg.element.transform"),jui.define("util.svg.element.poly",[],function(){var a=function(){function a(a){0!=b.length&&a.attr({points:b.join(" ")})}var b=[];this.point=function(a,c){return b.push(a+","+c),this},this.join=function(){if(b.length>0){var c=b[0];b.push(c)}a(this)}};return a},"util.svg.element.transform"),jui.define("util.svg",["util.base","util.math","util.svg.element","util.svg.element.transform","util.svg.element.path","util.svg.element.poly"],function(a,b,c,d,e,f){var g=function(b,g){function h(){l.root=m=new c,n=new d,o=new d,m.create("svg",g),n.create("g"),o.create("g"),n.translate(.5,.5),o.translate(.5,.5),b.appendChild(m.element),m.append(n),m.append(o)}function i(b,c,d,e){return b.create(c,d),0==q?n.append(b):p[q].append(b),a.typeCheck("function",e)&&(q++,p[q]=b,e.call(b),q--),b}function j(a,b,c,d){if(a.parent==n)throw new Error("JUI_CRITICAL_ERR: Parents are required elements of the '"+b+"'");return i(a,b,c,d)}function k(a){for(var b=a.childrens.length,c=0;b>c;c++){var d=a.childrens[c];d&&(d.parent==a&&a.element.appendChild(d.element),d.join&&d.join(),d.childrens.length>0&&k(d))}}var l=this,m=null,n=null,o=null,p={},q=0,r=!1;this.size=function(){if(2!=arguments.length)return m.size();var a=arguments[0],b=arguments[1];m.attr({width:a,height:b})},this.clear=function(a){n.each(function(){this.element.parentNode&&n.element.removeChild(this.element)}),a===!0&&o.each(function(){this.element.parentNode&&o.element.removeChild(this.element)})},this.reset=function(a){this.clear(a),n.childrens=[],a===!0&&(o.childrens=[])},this.render=function(a){this.clear(),k(r===!1||a===!0?m:n),r=!0},this.download=function(b){a.typeCheck("string",b)&&(b=b.split(".")[0]);var c=document.createElement("a");c.download=b?b+".svg":"svg.svg",c.href=this.toDataURL(),document.body.appendChild(c),c.click(),c.parentNode.removeChild(c)},this.downloadImage=function(b,c){c=c||"image/png";var d=new Image,e=this.size(),f=this.toDataURL().replace('width="100%"','width="'+e.width+'"').replace('height="100%"','height="'+e.height+'"');d.onload=function(){var e=document.createElement("canvas");e.width=d.width,e.height=d.height;var f=e.getContext("2d");f.drawImage(d,0,0);var g=e.toDataURL(c);a.typeCheck("string",b)&&(b=b.split(".")[0]);var h=document.createElement("a");h.download=b?b+".png":"svg.png",h.href=g,document.body.appendChild(h),h.click(),h.parentNode.removeChild(h)},d.src=f},this.exportCanvas=function(a){var b=new Image,c=this.size(),d=this.toDataURL().replace('width="100%"','width="'+c.width+'"').replace('height="100%"','height="'+c.height+'"');b.onload=function(){a.width=b.width,a.height=b.height;var c=a.getContext("2d");c.drawImage(b,0,0)},b.src=d},this.toXml=function(){var a=b.innerHTML;return a=a.replace('xmlns="http://www.w3.org/2000/svg"',""),['<?xml version="1.0" encoding="utf-8"?>',a.replace("<svg ",'<svg xmlns="http://www.w3.org/2000/svg" ')].join("\n")},this.toDataURL=function(b){b=b||"image/svg+xml";var c=this.toXml();return(a.browser.mozilla||a.browser.msie)&&(c=encodeURIComponent(c)),a.browser.msie?"data:image/svg+xml,"+c:"data:image/svg+xml;utf8,"+c},this.autoRender=function(a,b){q>0||(b?n.append(a):o.append(a))},this.getTextRect=function(a){if(""==a)return{width:0,height:0};var b=document.createElementNS("http://www.w3.org/2000/svg","text");b.setAttributeNS(null,"x",-200),b.setAttributeNS(null,"y",-200),b.appendChild(document.createTextNode(a)),m.element.appendChild(b);var c=b.getBoundingClientRect();return m.element.removeChild(b),{width:c.width,height:c.height}},this.custom=function(a,b,d){return i(new c,a,b,d)},this.defs=function(a){return i(new c,"defs",null,a)},this.symbol=function(a,b){return i(new c,"symbol",a,b)},this.g=this.group=function(a,b){return i(new d,"g",a,b)},this.marker=function(a,b){return i(new c,"marker",a,b)},this.a=function(a,b){return i(new d,"a",a,b)},this.switch=function(a,b){return i(new c,"switch",a,b)},this.use=function(a){return i(new c,"use",a)},this.rect=function(a,b){return i(new d,"rect",a,b)},this.line=function(a,b){return i(new d,"line",a,b)},this.circle=function(a,b){return i(new d,"circle",a,b)},this.text=function(b,c){return 2==arguments.length?a.typeCheck("function",c)?i(new d,"text",b,c):i(new d,"text",b).text(c):i(new d,"text",b)},this.textPath=function(b,d){return a.typeCheck("string",d)?i(new c,"textPath",b).text(d):i(new c,"textPath",b)},this.tref=function(b,d){return a.typeCheck("string",d)?i(new c,"tref",b).text(d):i(new c,"tref",b)},this.tspan=function(b,d){return a.typeCheck("string",d)?i(new c,"tspan",b).text(d):i(new c,"tspan",b)},this.ellipse=function(a,b){return i(new d,"ellipse",a,b)},this.image=function(a,b){return i(new d,"image",a,b)},this.path=function(a,b){return i(new e,"path",a,b)},this.polyline=function(a,b){return i(new f,"polyline",a,b)},this.polygon=function(a,b){return i(new f,"polygon",a,b)},this.pattern=function(a,b){return i(new c,"pattern",a,b)},this.mask=function(a,b){return i(new c,"mask",a,b)},this.clipPath=function(a,b){return i(new c,"clipPath",a,b)},this.linearGradient=function(a,b){return i(new c,"linearGradient",a,b)},this.radialGradient=function(a,b){return i(new c,"radialGradient",a,b)},this.filter=function(a,b){return i(new c,"filter",a,b)},this.stop=function(a){return j(new c,"stop",a)},this.animate=function(a){return j(new c,"animate",a)},this.animateColor=function(a){return j(new c,"animateColor",a)},this.animateMotion=function(a){return j(new c,"animateMotion",a)},this.animateTransform=function(a){return j(new c,"animateTransform",a)},this.mpath=function(a){return j(new c,"mpath",a)},this.set=function(a){return j(new c,"set",a)},this.feBlend=function(a){return j(new c,"feBlend",a)},this.feColorMatrix=function(a){return j(new c,"feColorMatrix",a)},this.feComponentTransfer=function(a){return j(new c,"feComponentTransfer",a)},this.feComposite=function(a){return j(new c,"feComposite",a)},this.feConvolveMatrix=function(a){return j(new c,"feConvolveMatrix",a)},this.feDiffuseLighting=function(a){return j(new c,"feDiffuseLighting",a)},this.feDisplacementMap=function(a){return j(new c,"feDisplacementMap",a)},this.feFlood=function(a){return j(new c,"feFlood",a)},this.feGaussianBlur=function(a){return j(new c,"feGaussianBlur",a)},this.feImage=function(a){return j(new c,"feImage",a)},this.feMerge=function(a,b){return j(new c,"feMerge",a,b)},this.feMergeNode=function(a){return j(new c,"feMergeNode",a)},this.feMorphology=function(a){return j(new c,"feMorphology",a)},this.feOffset=function(a){return j(new c,"feOffset",a)},this.feSpecularLighting=function(a){return j(new c,"feSpecularLighting",a)},this.feTile=function(a){return j(new c,"feTile",a)},this.feTurbulence=function(a){return j(new c,"feTurbulence",a)},h()};return g}),jui.define("util.svg3d",["util.base","util.math","util.svg"],function(a,b,c){var d=function(a,d){function e(){f=new c(a,d)}var f=null;this.size=function(){return f.size()},this.clear=function(a){return f.clear(a)},this.reset=function(a){return f.reset(a)},this.render=function(a){return f.render(a)},this.rect3d=function(a){var c=b.radian(a.degree),d=0,e=0,g=a.width,h=a.height,i=Math.cos(c)*a.depth+d,j=Math.sin(c)*a.depth+e,k=a.width+i,l=a.height+j,m=f.group({width:k,height:l},function(){delete a.width,a.height,a.degree,a.depth,f.path(a).MoveTo(i,d).LineTo(k,e).LineTo(g,j).LineTo(d,j),f.path(a).MoveTo(d,j).LineTo(d,l).LineTo(g,l).LineTo(g,j).ClosePath(),f.path(a).MoveTo(g,l).LineTo(k,h).LineTo(k,e).LineTo(g,j).ClosePath()});return m},e()};return d}),jui.define("chart.draw",["jquery","util.base"],function(a,b){var c=function(){this.render=function(){if(!b.typeCheck("function",this.draw))throw new Error("JUI_CRITICAL_ERR: 'draw' method must be implemented");b.typeCheck("function",this.drawBefore)&&this.drawBefore();var a=this.draw();if(!b.typeCheck("object",a))throw new Error("JUI_CRITICAL_ERR: 'draw' method should return the object");return b.typeCheck("object",this.brush)?(a.attr({"class":"brush brush-"+this.brush.type}),a.translate(this.chart.area("x"),this.chart.area("y"))):b.typeCheck("object",this.widget)?a.attr({"class":"widget widget-"+this.widget.type}):b.typeCheck("object",this.grid)&&a.root.attr({"class":"grid grid-"+this.grid.type}),a},this.format=function(){var a=this.grid||this.brush||this.widget,b=a.format||this.chart.format;return b.apply(this.chart,arguments)}};return c.setup=function(){return{type:null}},c}),jui.define("chart.axis",["jquery","util.base"],function(a,b){var c=function(a,c){function d(a){var b=f.origin,c=f.buffer,d=Math.ceil(b.length/c);f.page=1>a?1:a>d?d:a,f.start=(f.page-1)*c,f.end=f.start+c,f.end>b.length&&(f.start=b.length-c,f.end=b.length),f.end<=b.length&&(f.start=f.start<0?0:f.start,f.data=b.slice(f.start,f.end),b.length>0&&f.page++)}function e(){b.extend(f,c),f.area=b.extend(f.area,{x:0,y:0,width:a.area("width"),height:a.area("height")},!0),f.origin=f.data,d(1)}var f=this;this.update=function(a){this.origin=a,this.page=1,this.start=0,this.end=0,this.screen(1)},this.screen=function(b){d(b),this.end<=this.origin.length&&a.isRender()&&a.render()},this.next=function(){var b=this.origin,c=this.buffer,d=this.shift;this.start+=d;var e=this.start+c>b.length;this.end=e?b.length:this.start+c,this.start=e?b.length-c:this.start,this.start=this.start<0?0:this.start,this.data=b.slice(this.start,this.end),a.isRender()&&a.render()},this.prev=function(){var b=this.origin,d=this.buffer,e=this.shift;this.start-=e;var f=c.start<0;this.end=f?d:this.start+d,this.start=f?0:this.start,this.data=b.slice(this.start,this.end),a.isRender()&&a.render()},this.zoom=function(b,c){if(b!=c){var d=this.origin;this.end=c>d.length?d.length:c,this.start=0>b?0:b,this.data=d.slice(this.start,this.end),a.isRender()&&a.render()}},this.x=function(){},this.y=function(){},this.c=function(){},this.set=function(){},e()};return c.setup=function(){return{x:null,y:null,c:null,data:[],origin:[],area:{},buffer:1e4,shift:1,page:1,start:0,end:0}},c}),jui.defineUI("chart.builder",["jquery","util.base","util.svg","util.color","chart.axis"],function(a,b,c,d,e){var f=0;b.resize(function(){if(f!=a(window).width()){for(var b=jui.get("chart.builder"),c=0;c<b.length;c++)for(var d=b[c],e=0;e<d.length;e++)d[e].isFullSize()&&d[e].setSize();f=a(window).width()}},300);var g=function(){function f(a){var b=a.svg.size(),c={width:b.width-(v.left+v.right),height:b.height-(v.top+v.bottom),x:v.left,y:v.top};c.width<0&&(c.width=0),c.height<0&&(c.height=0),c.x2=c.x+c.width,c.y2=c.y+c.height,x=c}function g(a){return a.x=h(a.x,x.width),a.y=h(a.y,x.height),a.width=h(a.width,x.width),a.height=h(a.height,x.height),a.x2=a.x+a.width,a.y2=a.y+a.height,a}function h(a,c){return b.typeCheck("string",a)&&a.indexOf("%")>-1?c*(parseFloat(a.replace("%",""))/100):a}function i(a){y=a}function j(){y=null}function k(){w=b.deepClone(F.series),B=b.deepClone(F.brush),C=b.deepClone(F.widget),D={}}function l(a){var b=a.svg.defs();a.clipId=a.createId("clip-id");var c=a.svg.clipPath({id:a.clipId});c.append(a.svg.rect({x:0,y:0,width:a.area("width"),height:a.area("height")})),b.append(c),a.defs=b}function m(a){function c(c,d){if(!b.typeCheck("object",c[d]))return null;c[d].orient=c[d].orient||("x"==d?"bottom":"left"),b.typeCheck("integer",c[d].extend)&&b.extend(c[d],F.axis[c[d].extend][d],!0);var e=jui.include("chart.grid."+(c[d].type||"block"));jui.defineOptions(e,c[d]);var f=new e(a,c,c[d]);f.chart=a,f.axis=c,f.grid=c[d];var g=f.render();return"left"==c[d].orient?g.root.translate(x.x+a.area("x")-c[d].dist,x.y):"right"==c[d].orient?g.root.translate(x.x+a.area("x2")+c[d].dist,x.y):"bottom"==c[d].orient?g.root.translate(x.x,x.y+a.area("y2")+c[d].dist):"top"==c[d].orient?g.root.translate(x.x,x.y+a.area("y")-c[d].dist):g.root&&g.root.translate(x.x,x.y),g.scale}var d=b.deepClone(F.axis,{data:!0,origin:!0});for(var f in d)jui.defineOptions(e,d[f]),A[f]?(A[f].x=d[f].x,A[f].y=d[f].y,A[f].c=d[f].c):(A[f]=new e(a,d[f]),A[f].set=function(c,d){b.extend(F.axis[f][c],d),a.isRender()&&a.render()}),i(g(A[f].area)),A[f].x=c(A[f],"x"),A[f].y=c(A[f],"y"),A[f].c=c(A[f],"c"),j()}function n(a){var c=B;if(null!=c)for(var d=0;d<c.length;d++){var e=jui.include("chart.brush."+c[d].type);jui.defineOptions(e,c[d]);var f=A[c[d].axis];if(c[d].target)b.typeCheck("string",c[d].target)&&(c[d].target=[c[d].target]);else{var g=[];if(f)for(var h in f.data[0])g.push(h);c[d].target=g}c[d].index=d;var i=new e(a,f,c[d]);i.chart=a,i.axis=f,i.brush=c[d],i.render()}}function o(a,c){var d=C;if(null!=d)for(var e=0;e<d.length;e++){var f=jui.include("chart.widget."+d[e].type);jui.defineOptions(f,d[e]),d[e].index=e;var g=B[b.typeCheck("array",d[e].brush)?d[e].brush[0]:d[e].brush],h=new f(a,A[g.axis],d[e]);if(h.chart=a,h.axis=A[g.axis],h.widget=d[e],E&&!h.isRender()&&c!==!0)return;var i=h.render();h.isRender()||a.svg.autoRender(i,!1)}}function p(b){function c(c){var d=a(b.root).offset(),e=c.pageX-d.left,f=c.pageY-d.top;return c.bgX=e,c.bgY=f,c.chartX=e-b.padding("left"),c.chartY=f-b.padding("top"),c.chartX<0||c.chartX>b.area("width")||c.chartY<0||c.chartY>b.area("height")?void 0:!0}var d=b.svg.root,e=!1;d.on("click",function(a){c(a)?b.emit("chart.click",[a]):b.emit("bg.click",[a])}),d.on("dblclick",function(a){c(a)?b.emit("chart.dblclick",[a]):b.emit("bg.dblclick",[a])}),d.on("contextmenu",function(a){c(a)?b.emit("chart.rclick",[a]):b.emit("bg.rclick",[a]),a.preventDefault()}),d.on("mousemove",function(a){c(a)?e?b.emit("chart.mousemove",[a]):(b.emit("chart.mouseover",[a]),e=!0):(e&&(b.emit("chart.mouseout",[a]),e=!1),b.emit("bg.mousemove",[a]))}),d.on("mousedown",function(a){c(a)?b.emit("chart.mousedown",[a]):b.emit("bg.mousedown",[a])}),d.on("mouseup",function(a){c(a)?b.emit("chart.mouseup",[a]):b.emit("bg.mouseup",[a])}),d.on("mouseover",function(a){c(a)||b.emit("bg.mouseover",[a])}),d.on("mouseout",function(a){c(a)||b.emit("bg.mouseout",[a])}),b.addEvent(b.root,"selectstart",function(a){return a.preventDefault(),!1})}function q(a){for(var b=0;b<G.length;b++)a.off(G[b]);G=[]}function r(a,c,d){if(!b.typeCheck("undefined",d)&&D[d])return"url(#"+D[d]+")";var e=null,f=a.createId("gradient");c.id=f,"linear"==c.type?e=a.svg.linearGradient(c):"radial"==c.type&&(e=a.svg.radialGradient(c));for(var g=0;g<c.stops.length;g++)e.append(a.svg.stop(c.stops[g]));return a.defs.append(e),b.typeCheck("undefined",d)||(D[d]=f),"url(#"+f+")"}function s(a,c){if(b.typeCheck("undefined",c))return"none";if(b.typeCheck("object",c))return r(a,c);var e=d.parse(c);return e==c?c:r(a,e,c)}function t(a,c){b.typeCheck("string",a)?z=b.extend(jui.include("chart.theme."+a),c):b.typeCheck("object",a)&&(z=b.extend(z,a))}function u(a){F=b.deepClone(a.options,{data:!0,bind:!0});var c=F.padding;v="empty"==c?{left:0,right:0,bottom:0,top:0}:b.typeCheck("integer",c)?{left:c,right:c,bottom:c,top:c}:c,b.typeCheck("object",F.bind)&&a.bindUI(F.bind),b.typeCheck("array",F.axis)||(F.axis=[F.axis]),b.typeCheck("array",F.brush)||(F.brush=[F.brush]),b.typeCheck("array",F.widget)||(F.widget=[F.widget]),b.typeCheck("array",F.baseAxis)||(F.baseAxis=[F.baseAxis])}var v,w,x,y,z,A=[],B=[],C=[],D={},E=!1,F=null,G=[];this.init=function(){u(this),t(F.theme,F.style),this.svg=new c(this.root,{width:F.width,height:F.height}),this.render(),p(this)},this.get=function(a,b){var c={axis:A,brush:B,widget:C,series:w};return c[a][b]?c[a][b]:c[a]||c},this.area=function(a){return y?b.typeCheck("undefined",y[a])?y:y[a]:b.typeCheck("undefined",x[a])?x:x[a]},this.padding=function(a){return v[a]?v[a]:v},this.color=function(a,c){function d(b){var c=z.colors,d=b||a;return d>c.length-1?c[c.length-1]:c[d]}var e;if(c.colors instanceof Array?(e=c.colors[a],b.typeCheck("integer",e)&&(e=d(e))):e=d(),b.typeCheck("array",c.target)){var f=w[c.target[a]];f&&f.color&&(e=f.color,b.typeCheck("integer",e)&&(e=d(e)))}return D[e]?"url(#"+D[e]+")":s(this,e)},this.text=function(a,c){var d=this.svg.text(b.extend({"font-family":this.theme("fontFamily"),"font-size":this.theme("fontSize"),fill:this.theme("fontColor")},a),c);return d},this.theme=function(a,b,c){if(0==arguments.length)return z;if(1==arguments.length)return a.indexOf("Color")>-1&&null!=z[a]?s(this,z[a]):z[a];if(3==arguments.length){var d=a?b:c;return d.indexOf("Color")>-1&&null!=z[d]?s(this,z[d]):z[d]}},this.format=function(){if(0!=arguments.length){var a=F.format;return b.typeCheck("function",a)?a.apply(this,arguments):arguments[0]}},this.createId=function(a){return[a||"chart-id",+new Date,Math.round(100*Math.random())%100].join("-")},this.bindUI=function(a){function b(){for(var b=[],c=0;c<a.count();c++)b.push(a.get(c).data);d.update(b)}function c(){d.update(a.listData())}var d=this;"uix.table"==a.module.type?(a.callAfter("update",b),a.callAfter("sort",b),a.callAfter("append",b),a.callAfter("insert",b),a.callAfter("remove",b)):"uix.xtable"==a.module.type&&(a.callAfter("update",c),a.callAfter("sort",c))},this.on=function(a,c,d){b.typeCheck("string",a)&&b.typeCheck("function",c)&&(this.event.push({type:a.toLowerCase(),callback:c}),d===!0&&G.push(c))},this.render=function(a){this.svg.reset(a),q(this),f(this),k(this),l(this),m(this),n(this),o(this,a),this.svg.root.css({background:this.theme("backgroundColor")}),this.svg.render(a),E=!0},this.addBrush=function(a){F.brush.push(a),this.isRender()&&this.render()},this.removeBrush=function(a){F.brush.splice(a,1),this.isRender()&&this.render()},this.updateBrush=function(a,c){b.extend(F.brush[a],c),this.isRender()&&this.render()},this.addWidget=function(a){F.widget.push(a),this.isRender()&&this.render()},this.removeWidget=function(a){F.widget.splice(a,1),this.isRender()&&this.render()},this.updateWidget=function(a,c){b.extend(F.widget[a],c),this.isRender()&&this.render()},this.setTheme=function(a){t(a,F.style),this.isRender()&&this.render(!0)},this.setSize=function(a,b){2==arguments.length&&(F.width=a,F.height=b),this.svg.size(F.width,F.height),this.isRender()&&this.render(!0)},this.isFullSize=function(){return"100%"==F.width||"100%"==F.height?!0:!0},this.isRender=function(){return E?F.render:!0}};return g.setup=function(){return{width:"100%",height:"100%",padding:{top:50,bottom:50,left:50,right:50},theme:"jennifer",style:{},series:{},brush:[],widget:[],axis:[],bind:null,format:null,render:!0}},g}),jui.define("chart.theme.jennifer",[],function(){var a=["#7977C2","#7BBAE7","#FFC000","#FF7800","#87BB66","#1DA8A0","#929292","#555D69","#0298D5","#FA5559","#F5A397","#06D9B6","#C6A9D9","#6E6AFC","#E3E766","#C57BC3","#DF328B","#96D7EB","#839CB5","#9228E4"];return{backgroundColor:"white",fontSize:"11px",fontColor:"#333333",fontFamily:"arial,Tahoma,verdana",colors:a,gridFontColor:"#333333",gridActiveFontColor:"#ff7800",gridBorderColor:"#ebebeb",gridBorderWidth:1,gridBorderDashArray:"none",gridAxisBorderColor:"#ebebeb",gridAxisBorderWidth:1,gridActiveBorderColor:"#ff7800",gridActiveBorderWidth:1,tooltipPointRadius:5,tooltipPointBorderWidth:1,tooltipPointFontWeight:"bold",barBorderColor:"none",barBorderWidth:0,barBorderOpacity:0,barActiveBackgroundColor:"#06d9b6",barCircleBorderColor:"white",barDisableBackgroundOpacity:.5,gaugeBackgroundColor:"#ececec",gaugeArrowColor:"#666666",gaugeFontColor:"#666666",pieBorderColor:"white",pieBorderWidth:1,donutBorderColor:"white",donutBorderWidth:1,areaBackgroundOpacity:.5,areaSplitBackgroundColor:"#929292",bubbleBackgroundOpacity:.5,bubbleBorderWidth:1,candlestickBorderColor:"black",candlestickBackgroundColor:"white",candlestickInvertBorderColor:"red",candlestickInvertBackgroundColor:"red",ohlcBorderColor:"black",ohlcInvertBorderColor:"red",ohlcBorderRadius:5,lineBorderWidth:2,lineDisableBorderOpacity:.3,lineCircleBorderColor:"white",lineSplitBorderColor:null,lineSplitBorderOpacity:.5,pathBackgroundOpacity:.5,pathBorderWidth:1,scatterBorderColor:"white",scatterBorderWidth:1,scatterHoverColor:"white",waterfallBackgroundColor:"#87BB66",waterfallInvertBackgroundColor:"#FF7800",waterfallEdgeBackgroundColor:"#7BBAE7",waterfallLineColor:"#a9a9a9",waterfallLineDashArray:"0.9",focusBorderColor:"#FF7800",focusBorderWidth:1,focusBackgroundColor:"#FF7800",focusBackgroundOpacity:.1,pinFontColor:"#FF7800",pinFontSize:"10px",pinBorderColor:"#FF7800",pinBorderWidth:.7,titleFontColor:"#333",titleFontSize:"13px",titleFontWeight:"normal",legendFontColor:"#333",legendFontSize:"12px",tooltipFontColor:"#333",tooltipFontSize:"12px",tooltipBackgroundColor:"white",tooltipBorderColor:"#aaaaaa",tooltipBackgroundOpacity:.7,scrollBackgroundColor:"#dcdcdc",scrollThumbBackgroundColor:"#b2b2b2",scrollThumbBorderColor:"#9f9fa4",zoomBackgroundColor:"red",zoomFocusColor:"gray",crossBorderColor:"#a9a9a9",crossBorderWidth:1,crossBorderOpacity:.8,crossBalloonFontSize:"11px",crossBalloonFontColor:"white",crossBalloonBackgroundColor:"black",crossBalloonBackgroundOpacity:.5}}),jui.define("chart.theme.gradient",[],function(){var a=["linear(top) #9694e0,0.9 #7977C2","linear(top) #a1d6fc,0.9 #7BBAE7","linear(top) #ffd556,0.9 #ffc000","linear(top) #ff9d46,0.9 #ff7800","linear(top) #9cd37a,0.9 #87bb66","linear(top) #3bb9b2,0.9 #1da8a0","linear(top) #b3b3b3,0.9 #929292","linear(top) #67717f,0.9 #555d69","linear(top) #16b5f6,0.9 #0298d5","linear(top) #ff686c,0.9 #fa5559","linear(top) #fbbbb1,0.9 #f5a397","linear(top) #3aedcf,0.9 #06d9b6","linear(top) #d8c2e7,0.9 #c6a9d9","linear(top) #8a87ff,0.9 #6e6afc","linear(top) #eef18c,0.9 #e3e768","linear(top) #ee52a2,0.9 #df328b","linear(top) #b6e5f4,0.9 #96d7eb","linear(top) #93aec8,0.9 #839cb5","linear(top) #b76fef,0.9 #9228e4"];return{backgroundColor:"white",fontSize:"11px",fontColor:"#666",fontFamily:"arial,Tahoma,verdana",colors:a,gridFontColor:"#666",gridActiveFontColor:"#ff7800",gridBorderColor:"#efefef",gridBorderWidth:1,gridBorderDashArray:"none",gridAxisBorderColor:"#efefef",gridAxisBorderWidth:1,gridActiveBorderColor:"#ff7800",gridActiveBorderWidth:1,tooltipPointRadius:5,tooltipPointBorderWidth:1,tooltipPointFontWeight:"bold",barBorderColor:"none",barBorderWidth:0,barBorderOpacity:0,barActiveBackgroundColor:"linear(top) #3aedcf,0.9 #06d9b6",barCircleBorderColor:"white",barDisableBackgroundOpacity:.5,gaugeBackgroundColor:"#ececec",gaugeArrowColor:"#666666",gaugeFontColor:"#666666",pieBorderColor:"white",pieBorderWidth:1,donutBorderColor:"white",donutBorderWidth:1,areaBackgroundOpacity:.4,areaSplitBackgroundColor:"linear(top) #b3b3b3,0.9 #929292",bubbleBackgroundOpacity:.5,bubbleBorderWidth:1,candlestickBorderColor:"black",candlestickBackgroundColor:"linear(top) white",candlestickInvertBorderColor:"red",candlestickInvertBackgroundColor:"linear(top) red",ohlcBorderColor:"#14be9d",ohlcInvertBorderColor:"#ff4848",ohlcBorderRadius:5,lineBorderWidth:2,lineDisableBorderOpacity:.3,lineCircleBorderColor:"white",lineSplitBorderColor:null,lineSplitBorderOpacity:.5,pathBackgroundOpacity:.5,pathBorderWidth:1,scatterBorderColor:"white",scatterBorderWidth:2,scatterHoverColor:"white",waterfallBackgroundColor:"linear(top) #9cd37a,0.9 #87bb66",waterfallInvertBackgroundColor:"linear(top) #ff9d46,0.9 #ff7800",waterfallEdgeBackgroundColor:"linear(top) #a1d6fc,0.9 #7BBAE7",waterfallLineColor:"#a9a9a9",waterfallLineDashArray:"0.9",focusBorderColor:"#FF7800",focusBorderWidth:1,focusBackgroundColor:"#FF7800",focusBackgroundOpacity:.1,pinFontColor:"#FF7800",pinFontSize:"10px",pinBorderColor:"#FF7800",pinBorderWidth:.7,titleFontColor:"#333",titleFontSize:"13px",titleFontWeight:"normal",legendFontColor:"#666",legendFontSize:"12px",tooltipFontColor:"#fff",tooltipFontSize:"12px",tooltipBackgroundColor:"black",tooltipBorderColor:"none",tooltipBackgroundOpacity:1,scrollBackgroundColor:"#dcdcdc",scrollThumbBackgroundColor:"#b2b2b2",scrollThumbBorderColor:"#9f9fa4",zoomBackgroundColor:"red",zoomFocusColor:"gray",crossBorderColor:"#a9a9a9",crossBorderWidth:1,crossBorderOpacity:.8,crossBalloonFontSize:"11px",crossBalloonFontColor:"white",crossBalloonBackgroundColor:"black",crossBalloonBackgroundOpacity:.8}}),jui.define("chart.theme.dark",[],function(){var a=["#12f2e8","#26f67c","#e9f819","#b78bf9","#f94590","#8bccf9","#9228e4","#06d9b6","#fc6d65","#f199ff","#c8f21d","#16a6e5","#00ba60","#91f2a1","#fc9765","#f21d4f"];return{backgroundColor:"#222222",fontSize:"12px",fontColor:"#c5c5c5",fontFamily:"arial,Tahoma,verdana",colors:a,gridFontColor:"#868686",gridActiveFontColor:"#ff762d",gridBorderColor:"#464646",gridBorderWidth:1,gridBorderDashArray:"none",gridAxisBorderColor:"#464646",gridAxisBorderWidth:1,gridActiveBorderColor:"#ff7800",gridActiveBorderWidth:1,tooltipPointRadius:5,tooltipPointBorderWidth:1,tooltipPointFontWeight:"bold",barBorderColor:"none",barBorderWidth:0,barBorderOpacity:0,barActiveBackgroundColor:"#fc6d65",barCircleBorderColor:"white",barDisableBackgroundOpacity:.5,gaugeBackgroundColor:"#3e3e3e",gaugeArrowColor:"#a6a6a6",gaugeFontColor:"#c5c5c5",pieBorderColor:"#232323",pieBorderWidth:1,donutBorderColor:"#232323",donutBorderWidth:1,areaBackgroundOpacity:.5,areaSplitBackgroundColor:"#ebebeb",bubbleBackgroundOpacity:.5,bubbleBorderWidth:1,candlestickBorderColor:"#14be9d",candlestickBackgroundColor:"#14be9d",candlestickInvertBorderColor:"#ff4848",candlestickInvertBackgroundColor:"#ff4848",ohlcBorderColor:"#14be9d",ohlcInvertBorderColor:"#ff4848",ohlcBorderRadius:5,lineBorderWidth:2,lineDisableBorderOpacity:.3,lineCircleBorderColor:"white",lineSplitBorderColor:null,lineSplitBorderOpacity:.5,pathBackgroundOpacity:.2,pathBorderWidth:1,scatterBorderColor:"none",scatterBorderWidth:1,scatterHoverColor:"#222222",waterfallBackgroundColor:"#26f67c",waterfallInvertBackgroundColor:"#f94590",waterfallEdgeBackgroundColor:"#8bccf9",waterfallLineColor:"#a9a9a9",waterfallLineDashArray:"0.9",focusBorderColor:"#FF7800",focusBorderWidth:1,focusBackgroundColor:"#FF7800",focusBackgroundOpacity:.1,pinFontColor:"#FF7800",pinFontSize:"10px",pinBorderColor:"#FF7800",pinBorderWidth:.7,titleFontColor:"#ffffff",titleFontSize:"14px",titleFontWeight:"normal",legendFontColor:"#ffffff",legendFontSize:"11px",tooltipFontColor:"#333333",tooltipFontSize:"12px",tooltipBackgroundColor:"white",tooltipBorderColor:"white",tooltipBackgroundOpacity:1,scrollBackgroundColor:"#3e3e3e",scrollThumbBackgroundColor:"#666666",scrollThumbBorderColor:"#686868",zoomBackgroundColor:"red",zoomFocusColor:"gray",crossBorderColor:"#a9a9a9",crossBorderWidth:1,crossBorderOpacity:.8,crossBalloonFontSize:"11px",crossBalloonFontColor:"#333",crossBalloonBackgroundColor:"white",crossBalloonBackgroundOpacity:1}}),jui.define("chart.theme.pastel",[],function(){var a=["#73e9d2","#fef92c","#ff9248","#b7eef6","#08c4e0","#ffb9ce","#ffd4ba","#14be9d","#ebebeb","#666666","#cdbfe3","#bee982","#c22269"];return{backgroundColor:"white",fontSize:"11px",fontColor:"#333333",fontFamily:"Caslon540BT-Regular,Times,New Roman,serif",colors:a,gridFontColor:"#333333",gridActiveFontColor:"#ff7800",gridBorderColor:"#bfbfbf",gridBorderWidth:1,gridBorderDashArray:"1, 3",gridAxisBorderColor:"#bfbfbf",gridAxisBorderWidth:1,gridActiveBorderColor:"#ff7800",gridActiveBorderWidth:1,tooltipPointRadius:5,tooltipPointBorderWidth:1,tooltipPointFontWeight:"bold",barBorderColor:"none",barBorderWidth:0,barBorderOpacity:0,barActiveBackgroundColor:"#ffb9ce",barCircleBorderColor:"#ebebeb",barDisableBackgroundOpacity:.5,gaugeBackgroundColor:"#f5f5f5",gaugeArrowColor:"gray",gaugeFontColor:"#666666",pieBorderColor:"white",pieBorderWidth:1,donutBorderColor:"white",donutBorderWidth:3,areaBackgroundOpacity:.4,areaSplitBackgroundColor:"#ebebeb",bubbleBackgroundOpacity:.5,bubbleBorderWidth:1,candlestickBorderColor:"#14be9d",candlestickBackgroundColor:"#14be9d",candlestickInvertBorderColor:"#ff4848",candlestickInvertBackgroundColor:"#ff4848",ohlcBorderColor:"#14be9d",ohlcInvertBorderColor:"#ff4848",ohlcBorderRadius:5,lineBorderWidth:2,lineDisableBorderOpacity:.3,lineCircleBorderColor:"white",lineSplitBorderColor:null,lineSplitBorderOpacity:.5,pathBackgroundOpacity:.5,pathBorderWidth:1,scatterBorderColor:"white",scatterBorderWidth:1,scatterHoverColor:"white",waterfallBackgroundColor:"#73e9d2",waterfallInvertBackgroundColor:"#ffb9ce",waterfallEdgeBackgroundColor:"#08c4e0",waterfallLineColor:"#a9a9a9",waterfallLineDashArray:"0.9",focusBorderColor:"#FF7800",focusBorderWidth:1,focusBackgroundColor:"#FF7800",focusBackgroundOpacity:.1,pinFontColor:"#FF7800",pinFontSize:"10px",pinBorderColor:"#FF7800",pinBorderWidth:.7,titleFontColor:"#333",titleFontSize:"18px",titleFontWeight:"normal",legendFontColor:"#333",legendFontSize:"11px",tooltipFontColor:"#fff",tooltipFontSize:"12px",tooltipBackgroundColor:"black",tooltipBorderColor:"black",tooltipBackgroundOpacity:.7,scrollBackgroundColor:"#f5f5f5",scrollThumbBackgroundColor:"#b2b2b2",scrollThumbBorderColor:"#9f9fa4",zoomBackgroundColor:"red",zoomFocusColor:"gray",crossBorderColor:"#a9a9a9",crossBorderWidth:1,crossBorderOpacity:.8,crossBalloonFontSize:"11px",crossBalloonFontColor:"white",crossBalloonBackgroundColor:"black",crossBalloonBackgroundOpacity:.7}}),jui.define("chart.grid.core",["jquery","util.base"],function(a,b){var c=function(){this.wrapper=function(b,c){var d=this;return c.update=function(b){d.grid=a.extend(d.grid,b)},c},this.axisLine=function(b,c){return b.svg.line(a.extend({x1:0,y1:0,x2:0,y2:0,stroke:this.color("gridAxisBorderColor"),"stroke-width":b.theme("gridAxisBorderWidth"),"stroke-opacity":1},c))},this.line=function(b,c){return b.svg.line(a.extend({x1:0,y1:0,x2:0,y2:0,stroke:this.color("gridBorderColor"),"stroke-width":b.theme("gridBorderWidth"),"stroke-dasharray":b.theme("gridBorderDashArray"),"stroke-opacity":1},c))},this.color=function(a){return 3==arguments.length?this.grid.color?this.chart.color(0,{colors:[this.grid.color]}):this.chart.theme.apply(this.chart,arguments):this.grid.color?this.chart.color(0,{colors:[this.grid.color]}):this.chart.theme(a)},this.data=function(a,b){return this.axis.data&&this.axis.data[a]?this.axis.data[a][b]||this.axis.data[a]:this.axis.data||[]},this.drawGrid=function(a,b,c,d){var e=a.svg.group();return this[b].call(this,a,e),this.scale=this.wrapper(a,this.scale,d.key),d.hide&&e.attr({display:"none"}),{root:e,scale:this.scale}},this.getTextRotate=function(a){var c=this.grid.textRotate;if(null==c)return a;b.typeCheck("function",c)&&(c=c.apply(this.chart,[a]));var d=a.attr("x"),e=a.attr("y");return a.rotate(c,d,e),a},this.getGridSize=function(a,b){var c=a.area("width"),d=a.area("height"),e=a.area("left"==b||"right"==b?"y":"x"),f="left"==b||"right"==b?d:c,g=e,h=f;return{start:g,size:h,end:g+h}}};return c.setup=function(){return{extend:null,dist:0,orient:null,hide:!1,color:null,title:null,line:!1,subline:0,baseline:!0,format:null,textRotate:null}},c},"chart.draw"),jui.define("chart.grid.block",["util.scale","util.base"],function(a,b){var c=function(c,d,e){var f=e.orient,g=[];
this.top=function(a,b){var c=a.area("height");e.line||b.append(this.axisLine(a,{x1:this.start,x2:this.end}));for(var d=0;d<this.points.length;d++){var f=this.format(this.domain[d],d);if(f||0===f){var g=a.svg.group({transform:"translate("+this.points[d]+", 0)"});g.append(this.line(a,{x1:-this.half_band,y1:0,x2:-this.half_band,y2:e.line?c:this.bar})),g.append(this.getTextRotate(a.text({x:0,y:-20,"text-anchor":"middle"},f))),b.append(g)}}if(!e.full){var g=a.svg.group({transform:"translate("+this.end+", 0)"});g.append(this.line(a,{y2:e.line?c:this.bar})),b.append(g)}},this.bottom=function(a,b){var c=a.area("height");e.line||b.append(this.axisLine(a,{x1:this.start,x2:this.end}));for(var d=0,f=this.points.length;f>d;d++){var g=this.format(this.domain[d],d);if(g||0===g){var h=a.svg.group({transform:"translate("+this.points[d]+", 0)"});h.append(this.line(a,{x1:-this.half_band,y1:0,x2:-this.half_band,y2:e.line?-c:this.bar})),h.append(this.getTextRotate(a.text({x:0,y:20,"text-anchor":"middle"},g))),b.append(h)}}if(!e.full){var h=a.svg.group({transform:"translate("+this.end+", 0)"});h.append(this.line(a,{y2:e.line?-c:this.bar})),b.append(h)}},this.left=function(a,b){var c=a.area("width");e.line||b.append(this.axisLine(a,{y1:this.start,y2:this.end}));for(var d=0;d<this.points.length;d++){var f=this.format(this.domain[d],d);if(f||0===f){var g=a.svg.group({transform:"translate(0, "+(this.points[d]-this.half_band)+")"});g.append(this.line(a,{x2:e.line?c:-this.bar})),g.append(this.getTextRotate(a.text({x:-this.bar-4,y:this.half_band,"text-anchor":"end"},f))),b.append(g)}}if(!e.full){var g=a.svg.group({transform:"translate(0, "+this.end+")"});g.append(this.line(a,{x2:e.line?a.area("width"):-this.bar})),b.append(g)}},this.right=function(a,b){e.line||b.append(this.axisLine(a,{y1:this.start,y2:this.end}));for(var c=0;c<this.points.length;c++){var d=this.format(this.domain[c],c);if(d||0===d){var f=a.svg.group({transform:"translate(0, "+(this.points[c]-this.half_band)+")"});f.append(this.line(a,{x2:e.line?-a.area("width"):this.bar})),f.append(this.getTextRotate(a.text({x:this.bar+4,y:this.half_band,"text-anchor":"start"},d))),b.append(f)}}if(!e.full){var f=a.svg.group({transform:"translate(0, "+this.end+")"});f.append(this.line(a,{x2:e.line?-a.area("width"):this.bar})),b.append(f)}},this.initDomain=function(){if(b.typeCheck("string",this.grid.domain)){var a=this.grid.domain,c=this.data();if(this.grid.reverse)var d=c.length-1,e=0,f=-1;else var d=0,e=c.length-1,f=1;for(var h=d;this.grid.reverse?h>=e:e>=h;h+=f)g.push(c[h][a])}else g=b.typeCheck("function",this.grid.domain)?this.grid.domain.call(this.chart):this.grid.domain;this.grid.reverse&&g.reverse()},this.drawBefore=function(){this.initDomain(),e.type=e.type||"block";var b=this.getGridSize(c,f,e);this.scale=a.ordinal().domain(g);var d=[b.start,b.end];e.full?this.scale.rangeBands(d):this.scale.rangePoints(d),this.start=b.start,this.size=b.size,this.end=b.end,this.points=this.scale.range(),this.domain=this.scale.domain(),this.band=this.scale.rangeBand(),this.half_band=e.full?0:this.band/2,this.bar=6,this.reverse=e.reverse},this.draw=function(){return this.drawGrid(c,f,"block",e)}};return c.setup=function(){return{domain:null,reverse:!1,max:10,full:!1}},c},"chart.grid.core"),jui.define("chart.grid.date",["util.time","util.scale","util.base"],function(a,b,c){var d=function(d,e,f){var g=f.orient,h=[],i=[];this.top=function(a,b){f.line||b.append(this.axisLine(a,{x1:this.start,x2:this.end}));for(var c=this.ticks,d=this.values,e=this.bar,g=0;g<c.length;g++){var h=this.format(c[g],g);if(h||0===h){var i=a.svg.group({transform:"translate("+d[g]+", 0)"});i.append(this.line(a,{y2:f.line?a.area("height"):-e})),i.append(this.getTextRotate(a.text({x:0,y:-e-4,"text-anchor":"middle",fill:a.theme("gridFontColor")},h))),b.append(i)}}},this.bottom=function(a,b){f.line||b.append(this.axisLine(a,{x1:this.start,x2:this.end}));for(var c=this.ticks,d=this.values,e=this.bar,g=0;g<c.length;g++){var h=this.format(c[g],g);if(h||0===h){var i=a.svg.group({transform:"translate("+d[g]+", 0)"});i.append(this.line(a,{y2:f.line?-a.area("height"):e})),i.append(this.getTextRotate(a.text({x:0,y:3*e,"text-anchor":"middle",fill:a.theme("gridFontColor")},h))),b.append(i)}}},this.left=function(a,b){f.line||b.append(this.axisLine(a,{y1:this.start,y2:this.end}));for(var c=this.ticks,d=this.values,e=this.bar,g=0;g<c.length;g++){var h=this.format(c[g],g);if(h||0===h){var i=a.svg.group({transform:"translate(0,"+d[g]+")"});i.append(this.line(a,{x2:f.line?a.area("width"):-e})),i.append(this.getTextRotate(a.text({x:-e-2,y:e-2,"text-anchor":"end",fill:a.theme("gridFontColor")},h))),b.append(i)}}},this.right=function(a,b){f.line||b.append(this.axisLine(a,{y1:this.start,y2:this.end}));for(var c=this.ticks,d=this.values,e=this.bar,g=0;g<c.length;g++){var h=this.format(c[g],g);if(h||0===h){var i=a.svg.group({transform:"translate(0,"+d[g]+")"});i.append(this.line(a,{x2:f.line?-a.area("width"):e})),i.append(this.getTextRotate(a.text({x:e+4,y:-e,"text-anchor":"start",fill:a.theme("gridFontColor")},h))),b.append(i)}}},this.wrapper=function(a,b,d){function e(a){if(c.typeCheck("date",a))return f(+a);var b=g.axis.data[a][d];return f(c.typeCheck("string",b)?+new Date(b):+b)}var f=b,g=this;return f.update=function(a){g.grid=$.extend(g.grid,a)},d?$.extend(e,f):f},this.initDomain=function(){var a=this.grid.min||void 0,b=this.grid.max||void 0,d=this.data(),e=[];if(c.typeCheck("string",this.grid.domain)){var f=this.grid.domain;e.push(+d[0][f]),e.push(+d[d.length-1][f])}else if(c.typeCheck("function",this.grid.domain))for(var g=d.length;g--;){var j=this.grid.domain.call(this.chart,d[g]);c.typeCheck("array",j)?(e[g]=Math.max.apply(Math,j),e.push(Math.min.apply(Math,j))):e[g]=j}else e=this.grid.domain;return c.typeCheck("undefined",a)&&(a=Math.min.apply(Math,e)),c.typeCheck("undefined",b)&&(b=Math.max.apply(Math,e)),this.grid.max=b,this.grid.min=a,h=[this.grid.min,this.grid.max],i=this.grid.step,this.grid.reverse&&h.reverse(),c.typeCheck("function",i)&&(this.grid.step=i.call(this.chart,h)),h},this.drawBefore=function(){this.initDomain();var c=this.getGridSize(d,g,f),e=[c.start,c.end];this.scale=b.time().domain(h).rangeRound(e),this.ticks=this.grid.realtime?this.scale.realTicks(f.step[0],f.step[1]):this.scale.ticks(f.step[0],f.step[1]),"string"==typeof f.format&&!function(b,c){b.format=function(b){return a.format(b,c)}}(f,f.format),this.start=c.start,this.size=c.size,this.end=c.end,this.bar=6,this.values=[];for(var i=0,j=this.ticks.length;j>i;i++)this.values[i]=this.scale(this.ticks[i])},this.draw=function(){return this.drawGrid(d,g,"date",f)}};return d.setup=function(){return{domain:null,step:10,min:0,max:0,unit:null,reverse:!1,key:null,realtime:!1}},d},"chart.grid.core"),jui.define("chart.grid.dateblock",["util.time","util.scale","util.base"],function(a,b,c){var d=function(d,e,f){var g,h=f.orient,i=[],j=[],k=0;this.top=function(a,b){f.line||b.append(this.axisLine(a,{x1:this.start,x2:this.end}));for(var c=this.ticks,d=this.values,e=this.bar,g=0;g<c.length;g++){var h=this.format(c[g],g);if(h||0===h){var i=a.svg.group({transform:"translate("+d[g]+", 0)"});i.append(this.line(a,{y2:f.line?a.area("height"):-e})),i.append(this.getTextRotate(a.text({x:0,y:-e-4,"text-anchor":"middle",fill:a.theme("gridFontColor")},h))),b.append(i)}}},this.bottom=function(a,b){f.line||b.append(this.axisLine(a,{x1:this.start,x2:this.end}));for(var c=this.ticks,d=this.values,e=this.bar,g=0;g<c.length;g++){var h=this.format(c[g],g);if(h||0===h){var i=a.svg.group({transform:"translate("+d[g]+", 0)"});i.append(this.line(a,{y2:f.line?-a.area("height"):e})),i.append(this.getTextRotate(a.text({x:0,y:3*e,"text-anchor":"middle",fill:a.theme("gridFontColor")},h))),b.append(i)}}},this.left=function(a,b){f.line||b.append(this.axisLine(a,{y1:this.start,y2:this.end}));for(var c=this.ticks,d=this.values,e=this.bar,g=0;g<c.length;g++){var h=this.format(c[g],g);if(h||0===h){var i=a.svg.group({transform:"translate(0,"+d[g]+")"});i.append(this.line(a,{x2:f.line?a.area("width"):-e})),i.append(this.getTextRotate(a.text({x:-e-2,y:e-2,"text-anchor":"end",fill:a.theme("gridFontColor")},h))),b.append(i)}}},this.right=function(a,b){f.line||b.append(this.axisLine(a,{y1:this.start,y2:this.end}));for(var c=this.ticks,d=this.values,e=this.bar,g=0;g<c.length;g++){var h=this.format(c[g],g);if(h||0===h){var i=a.svg.group({transform:"translate(0,"+d[g]+")"});i.append(this.line(a,{x2:f.line?-a.area("width"):e})),i.append(this.getTextRotate(a.text({x:e+4,y:-e,"text-anchor":"start",fill:a.theme("gridFontColor")},h))),b.append(i)}}},this.wrapper=function(a,b){var c=b,d=this;return c.update=function(a){d.grid=$.extend(d.grid,a)},c.rangeBand=function(){return k},c},this.initDomain=function(){var a=this.grid.min||void 0,b=this.grid.max||void 0,d=this.data(),e=[];if(c.typeCheck("string",this.grid.domain)){var f=this.grid.domain;e.push(+d[0][f]),e.push(+d[d.length-1][f])}else if(c.typeCheck("function",this.grid.domain))for(var g=d.length;g--;){var h=this.grid.domain.call(this.chart,d[g]);c.typeCheck("array",h)?(e[g]=+Math.max.apply(Math,h),e.push(+Math.min.apply(Math,h))):e[g]=+h}else e=this.grid.domain;return c.typeCheck("undefined",a)&&(a=Math.min.apply(Math,e)),c.typeCheck("undefined",b)&&(b=Math.max.apply(Math,e)),this.grid.max=b,this.grid.min=a,i=[this.grid.min,this.grid.max],j=c.typeCheck("function",this.grid.step)?j.call(this.chart,i):this.grid.step,this.grid.reverse&&i.reverse(),i},this.drawBefore=function(){console.log("aaa");var c=this;this.initDomain();var e=this.getGridSize(d,h,f),l=[e.start,e.end];console.log(i,l,j);var m=b.time().domain(i).rangeRound(l);k=Math.abs(l[0]-l[1])/(this.grid.full?this.axis.data.length-1:this.axis.data.length),g=k/2,this.ticks=this.grid.realtime?m.realTicks(j[0],j[1]):m.ticks(j[0],j[1]),"string"==typeof f.format&&!function(b,c){b.format=function(b){return a.format(b,c)}}(f,f.format),this.start=e.start,this.size=e.size,this.end=e.end,this.bar=6,this.values=[];for(var n=0,o=this.ticks.length;o>n;n++)this.values[n]=m(this.ticks[n]);console.log(this.ticks,this.values);var p=c.grid.full?0:g;this.scale=$.extend(function(a){return a*k+p},m)},this.draw=function(){return this.drawGrid(d,h,"dateblock",f)}};return d.setup=function(){return{domain:null,step:10,min:0,max:0,unit:null,full:!1,reverse:!1,key:null,realtime:!1}},d},"chart.grid.core"),jui.define("chart.grid.radar",["util.math","util.base"],function(a,b){var c=function(c,d,e){function f(a,b,c,d,e,f){var g=Math.abs(f),h=c,j=d;b.append(a.svg.circle({cx:h,cy:j,r:g,"fill-opacity":0,stroke:i.color("gridAxisBorderColor"),"stroke-width":a.theme("gridBorderWidth")}))}function g(b,c,d,e,f,g,h,j){var k=b.svg.group(),l=[];l.push([d+f,e+g]);for(var m=f,n=g,o=0;h>o;o++){var p=a.rotate(m,n,j);m=p.x,n=p.y,l.push([d+p.x,e+p.y])}for(var q=b.svg.path({fill:"none",stroke:i.color("gridAxisBorderColor"),"stroke-width":b.theme("gridBorderWidth")}),o=0;o<l.length;o++){var r=l[o];0==o?q.MoveTo(r[0],r[1]):q.LineTo(r[0],r[1])}q.LineTo(l[0][0],l[0][1]),k.append(q),c.append(k)}function h(b){var d=e.max,f=c.padding("left"),g=c.padding("top");return function(c,e){var h=e/d,i=Math.abs(b.y1)-Math.abs(b.y2),j=i*h,l=2*Math.PI/k.length,m=b.x1,n=b.y1,o=-j,p=0,q=a.rotate(p,o,l*c);return{x:f+m+q.x,y:g+n+q.y}}}var i=this,j=[],k=[];this.initDomain=function(){if(b.typeCheck("string",this.grid.domain)){var a=this.grid.domain,c=this.data();if(this.grid.reverse)var d=c.length-1,e=0,f=-1;else var d=0,e=c.length-1,f=1;for(var g=d;this.grid.reverse?g>=e:e>=g;g+=f)k.push(c[g][a])}else k=b.typeCheck("function",this.grid.domain)?this.grid.domain(this.chart,this.grid):this.grid.domain;this.grid.reverse&&k.reverse()},this.drawBefore=function(){this.initDomain()},this.draw=function(){var b=c.area("width"),d=c.area("height"),i=b;i>d&&(i=d);var l=i/2,m=c.area("x")+b/2,n=c.area("y")+d/2,o=-l,p=0,q=k.length,r=this.grid.step,s=2*Math.PI/q,t=Math.abs(o)/r,u=c.svg.group(),v=c.svg.group();u.append(v),j=[];for(var w=0;q>w;w++){var x=m+p,y=n+o;v.append(c.svg.line({x1:m,y1:n,x2:x,y2:y,stroke:this.color("gridAxisBorderColor"),"stroke-width":c.theme("gridBorderWidth")})),j[w]={x1:m,y1:n,x2:x,y2:y};var z=y,A=x,B="middle";y>n?z=y+20:n>y&&(z=y-10),x>m?(B="start",A+=10):m>x&&(B="end",A-=10),e.hideText||v.append(c.text({x:A,y:z,"text-anchor":B,fill:c.theme("gridFontColor")},k[w]));var C=a.rotate(p,o,s);p=C.x,o=C.y}if(!e.line)return{root:v,scale:h(j[0])};o=-l;for(var D=0,E=this.grid.max/this.grid.step,w=0;r>w;w++)0==w&&this.grid.extra?o+=t:("circle"==this.grid.shape?f(c,v,m,n,0,o,q):g(c,v,m,n,0,o,q,s),this.grid.hideText||v.append(c.text({x:m,y:n+(o+t-5),fill:c.theme("gridFontColor")},this.grid.max-D+"")),o+=t,D+=E);return this.grid.hide&&v.attr({display:"none"}),{root:v,scale:h(j[0])}}};return c.setup=function(){return{domain:null,reverse:!1,max:100,step:10,line:!0,hideText:!1,extra:!1,shape:"radial"}},c},"chart.grid.core"),jui.define("chart.grid.range",["util.scale","util.base"],function(a,b){var c=function(c,d,e){var f=e.orient,g=[];this.top=function(a,b){e.line||b.append(this.axisLine(a,{x2:this.size}));for(var c=this.scale.min(),d=this.ticks,f=this.values,g=this.bar,h=0;h<d.length;h++){var i=this.format(d[h],h);if(i||0===i){var j=0==d[h]&&d[h]!=c,k=a.svg.group({transform:"translate("+f[h]+", 0)"});k.append(this.line(a,{y2:e.line?a.area("height"):-g,stroke:this.color(j,"gridActiveBorderColor","gridAxisBorderColor"),"stroke-width":a.theme(j,"gridActiveBorderWidth","gridBorderWidth")})),k.append(this.getTextRotate(a.text({x:0,y:-g-4,"text-anchor":"middle",fill:a.theme(j,"gridActiveFontColor","gridFontColor")},i))),b.append(k)}}},this.bottom=function(a,b){e.line||b.append(this.axisLine(a,{x1:this.start,x2:this.end}));for(var c=this.scale.min(),d=this.ticks,f=this.values,g=this.bar,h=0;h<d.length;h++){var i=this.format(d[h],h);if(i||0===i){var j=0==d[h]&&d[h]!=c,k=a.svg.group({transform:"translate("+f[h]+", 0)"});k.append(this.line(a,{y2:e.line?-a.area("height"):g,stroke:this.color(j,"gridActiveBorderColor","gridAxisBorderColor"),"stroke-width":a.theme(j,"gridActiveBorderWidth","gridBorderWidth")})),k.append(this.getTextRotate(a.text({x:0,y:3*g,"text-anchor":"middle",fill:a.theme(j,"gridActiveFontColor","gridFontColor")},i))),b.append(k)}}},this.left=function(a,b){e.line||b.append(this.axisLine(a,{y1:this.start,y2:this.end}));for(var c=this.scale.min(),d=this.ticks,f=this.values,g=this.bar,h=0;h<d.length;h++){var i=this.format(d[h],h);if(i||0===i){var j=0==d[h]&&d[h]!=c,k=a.svg.group({transform:"translate(0, "+f[h]+")"});k.append(this.line(a,{x2:e.line?a.area("width"):-g,stroke:this.color(j,"gridActiveBorderColor","gridAxisBorderColor"),"stroke-width":a.theme(j,"gridActiveBorderWidth","gridBorderWidth")})),e.hideText||k.append(this.getTextRotate(a.text({x:-g-4,y:g,"text-anchor":"end",fill:a.theme(j,"gridActiveFontColor","gridFontColor")},i))),b.append(k)}}},this.right=function(a,b){e.line||b.append(this.axisLine(a,{y1:this.start,y2:this.end}));for(var c=this.scale.min(),d=this.ticks,f=this.values,g=this.bar,h=0;h<d.length;h++){var i=this.format(d[h],h);if(i||0===i){var j=0==d[h]&&d[h]!=c,k=a.svg.group({transform:"translate(0, "+f[h]+")"});k.append(this.line(a,{x2:e.line?-a.area("width"):g,stroke:this.color(j,"gridActiveBorderColor","gridAxisBorderColor"),"stroke-width":a.theme(j,"gridActiveBorderWidth","gridBorderWidth")})),k.append(this.getTextRotate(a.text({x:g+4,y:g,"text-anchor":"start",fill:a.theme(j,"gridActiveFontColor","gridFontColor")},i))),b.append(k)}}},this.wrapper=function(a,b,c){function d(a){return e(f.axis.data[a][c])}var e=b,f=this;return e.update=function(a){f.grid=$.extend(f.grid,a)},c?$.extend(d,e):e},this.initDomain=function(){var a=this.grid.min||void 0,c=this.grid.max||void 0,d=this.data(),f=[],h=!1;if(b.typeCheck("string",this.grid.domain)){var i=this.grid.domain;f=new Array(d.length);for(var j=d.length;j--;){var k=d[j][i];b.typeCheck("array",k)?(f[j]=Math.max(k),f.push(Math.min(k))):(f[j]=k,f.push(0))}}else if(b.typeCheck("function",this.grid.domain)){f=new Array(d.length);for(var l=!1,j=d.length;j--;){var k=this.grid.domain.call(this.chart,d[j]);b.typeCheck("array",k)?(f[j]=Math.max.apply(Math,k),f.push(Math.min.apply(Math,k))):(f[j]=k,l||(f.push(0),l=!0))}}else f=e.domain,h=!0;var m=Math.min.apply(Math,f),n=Math.max.apply(Math,f);h?(a=m,c=n):(("undefined"==typeof a||a>m)&&(a=m),("undefined"==typeof c||n>c)&&(c=n)),this.grid.max=c,this.grid.min=a;var o;if(o=b.typeCheck("function",this.grid.unit)?this.grid.unit.call(this.chart,this.grid):b.typeCheck("number",this.grid.unit)?this.grid.unit:Math.ceil((c-a)/this.grid.step),0==o)g=[0,0];else{for(var p=0;c>p;)p+=o;for(var q=p;q>a;)q-=o;g=[q,p],this.grid.step=Math.abs(q-p)/o}return this.grid.reverse&&g.reverse(),g},this.drawBefore=function(){this.initDomain();var b=this.getGridSize(c,f,e);this.scale=a.linear().domain(g),this.scale.range("left"==f||"right"==f?[b.end,b.start]:[b.start,b.end]),this.start=b.start,this.size=b.size,this.end=b.end,this.step=this.grid.step,this.nice=this.grid.nice,this.ticks=this.scale.ticks(this.step,this.nice),this.bar=6,this.values=[];for(var d=0,h=this.ticks.length;h>d;d++)this.values[d]=this.scale(this.ticks[d])},this.draw=function(){return this.drawGrid(c,f,"range",e)}};return c.setup=function(){return{domain:null,step:10,min:0,max:0,unit:null,reverse:!1,key:null,hideText:!1,nice:!1}},c},"chart.grid.core"),jui.define("chart.grid.rule",["util.scale","util.base"],function(a,b){var c=function(c,d,e){var f=e.orient,g=[];this.top=function(a,b){var c=a.area("height"),d=c/2;b.append(this.axisLine(a,{y1:this.center?d:0,y2:this.center?d:0,x1:this.start,x2:this.end}));for(var e=this.ticks,f=this.values,g=this.bar,h=0;h<e.length;h++){var i=this.format(e[h],h);if(i||0===i){var j=0==e[h],k=a.svg.group().translate(f[h],this.center?d:0);k.append(this.line(a,{y1:this.center?-g:0,y2:g,stroke:this.color("gridAxisBorderColor"),"stroke-width":a.theme("gridBorderWidth")})),(!j||j&&!this.hideZero)&&k.append(this.getTextRotate(a.text({x:0,y:g+g+4,"text-anchor":"middle",fill:a.theme("gridFontColor")},i))),b.append(k)}}},this.bottom=function(a,b){var c=a.area("height"),d=c/2;b.append(this.axisLine(a,{y1:this.center?-d:0,y2:this.center?-d:0,x1:this.start,x2:this.end}));for(var e=this.ticks,f=this.values,g=this.bar,h=0;h<e.length;h++){var i=this.format(e[h],h);if(i||0===i){var j=0==e[h],k=a.svg.group().translate(f[h],this.center?-d:0);k.append(this.line(a,{y1:this.center?-g:0,y2:this.center?g:-g,stroke:this.color("gridAxisBorderColor"),"stroke-width":a.theme("gridBorderWidth")})),(!j||j&&!this.hideZero)&&k.append(this.getTextRotate(a.text({x:0,y:2*-g,"text-anchor":"middle",fill:a.theme(j,"gridActiveFontColor","gridFontColor")},i))),b.append(k)}}},this.left=function(a,b){var c=a.area("width"),d=(a.area("height"),c/2);b.append(this.axisLine(a,{x1:this.center?d:0,x2:this.center?d:0,y1:this.start,y2:this.end}));for(var e=this.ticks,f=this.values,g=this.bar,h=0;h<e.length;h++){var i=this.format(e[h],h);if(i||0===i){var j=0==e[h],k=a.svg.group().translate(this.center?d:0,f[h]);k.append(this.line(a,{x1:this.center?-g:0,x2:g,stroke:this.color("gridAxisBorderColor"),"stroke-width":a.theme("gridBorderWidth")})),(!j||j&&!this.hideZero)&&k.append(this.getTextRotate(a.text({x:g/2+4,y:g-2,fill:a.theme("gridFontColor")},i))),b.append(k)}}},this.right=function(a,b){var c=a.area("width"),d=c/2;b.append(this.axisLine(a,{x1:this.center?-d:0,x2:this.center?-d:0,y1:this.start,y2:this.end}));for(var e=this.ticks,f=this.values,g=this.bar,h=0;h<e.length;h++){var i=this.format(e[h],h);if(i||0===i){var j=0==e[h],k=a.svg.group().translate(this.center?-d:0,f[h]);k.append(this.line(a,{x1:this.center?-g:0,x2:this.center?g:-g,stroke:this.color("gridAxisBorderColor"),"stroke-width":a.theme("gridBorderWidth")})),(!j||j&&!this.hideZero)&&k.append(this.getTextRotate(a.text({x:-g-4,y:g-2,"text-anchor":"end",fill:a.theme("gridFontColor")},i))),b.append(k)}}},this.wrapper=function(a,b,c){function d(a){return e(f.axis.data[a][c])}var e=b,f=this;return e.update=function(a){f.grid=$.extend(f.grid,a)},c?$.extend(d,e):e},this.initDomain=function(){var a=this.grid.min||void 0,c=this.grid.max||void 0,d=this.data(),f=[];if(b.typeCheck("string",this.grid.domain)){var h=this.grid.domain;f=new Array(d.length);for(var i=0,j=d.length;j>i;i++){var k=d[i][h];b.typeCheck("array",k)?(f[i]=Math.max(k),f.push(Math.min(k))):f[i]=k}}else if(b.typeCheck("function",this.grid.domain)){f=new Array(d.length);for(var i=0,j=d.length;j>i;i++){var k=this.grid.domain.call(this.chart,d[i]);b.typeCheck("array",k)?(f[i]=Math.max.apply(Math,k),f.push(Math.min.apply(Math,k))):f[i]=k}}else f=e.domain;var l=Math.min.apply(Math,f),m=Math.max.apply(Math,f);"undefined"==typeof a&&(a=l),"undefined"==typeof c&&(c=m),this.grid.max=c,this.grid.min=a;var n;if(n=b.typeCheck("function",this.grid.unit)?this.grid.unit.call(this.chart,this.grid):b.typeCheck("number",this.grid.unit)?this.grid.unit:Math.ceil((c-a)/this.grid.step),0==n)g=[0,0];else{for(var o=0;c>o;)o+=n;for(var p=o;p>a;)p-=n;g=[p,o],console.log(a,c)}return this.grid.reverse&&g.reverse(),g},this.drawBefore=function(){this.initDomain();var b=this.getGridSize(c,f,e);this.scale=a.linear().domain(g),this.scale.range("left"==f||"right"==f?[b.end,b.start]:[b.start,b.end]),this.start=b.start,this.size=b.size,this.end=b.end,this.step=this.grid.step,this.nice=this.grid.nice,this.ticks=this.scale.ticks(this.step,this.nice),this.bar=6,this.hideZero=this.grid.hideZero,this.center=this.grid.center,this.values=[];for(var d=0,h=this.ticks.length;h>d;d++)this.values[d]=this.scale(this.ticks[d])},this.draw=function(){return this.drawGrid(c,f,"rule",e)}};return c.setup=function(){return{domain:null,step:10,min:0,max:0,unit:null,reverse:!1,key:null,hideZero:!1,hideText:!1,nice:!1,center:!1}},c},"chart.grid.core"),jui.define("chart.grid.panel",[],function(){var a=function(a,b,c){function d(a,b){return"string"==typeof a&&a.indexOf("%")>-1?b*(parseFloat(a.replace("%",""))/100):a}function e(a,b){var c;if("number"==typeof a)c=[a,a];else if("string"==typeof a)c=a.indexOf("%")>-1?[d(a,b.area("width")),d(a,b.area("height"))]:[parseFloat(a),parseFloat(a)];else if(a instanceof Array){for(var e=0;e<a.length;e++)0==e?a[e]=d(a[e],b.area("width")):1==e&&(a[e]=d(a[e],b.area("height")));c=a}return c}var f,g;this.drawBefore=function(){f=[0,0],null!==c.start&&(f=e(c.start,a)),g=[a.area("width"),a.area("height")],null!=c.size&&(g=e(c.size,a))},this.scale=function(){return function(){return{x:f[0],y:f[1],width:g[0],height:g[1]}}},this.draw=function(){return{scale:this.scale(a)}}};return a},"chart.grid.core"),jui.define("chart.grid.table",[],function(){var a=function(a,b,c){function d(a,b){return"string"==typeof a&&a.indexOf("%")>-1?b*(parseFloat(a.replace("%",""))/100):a}function e(a,b){var c;if("number"==typeof a)c=[a,a];else if("string"==typeof a)c=a.indexOf("%")>-1?[d(a,b.area("width")),d(a,b.area("height"))]:[parseFloat(a),parseFloat(a)];else if(a instanceof Array){for(var e=0;e<a.length;e++)0==e?a[e]=d(a[e],b.area("width")):1==e&&(a[e]=d(a[e],b.area("height")));c=a}return c}var f,g,h,i,j,k,l;this.drawBefore=function(){f=[0,0],null!==c.start&&(f=e(c.start,a)),g=[a.area("width"),a.area("height")],null!=c.size&&(g=e(c.size,a)),k=c.row,l=c.column,i=g[0]/l,h=g[1]/k,j=c.outerPadding},this.scale=function(){return function(a){var b=Math.floor(a/l),c=a%l,d=c*i,e=b*h;return{x:d-j,y:e-j,width:i-2*j,height:h-2*j}}},this.draw=function(){return{scale:this.scale(a)}}};return a.setup=function(){return{row:1,column:1,outerPadding:1}},a},"chart.grid.core"),jui.define("chart.grid.overlap",[],function(){var a=function(a,b,c){function d(a){var b=h/2-a*f,c=i/2-a*g;return{x:b,y:c}}var e,f,g,h,i;this.drawBefore=function(){e=c.size||this.data().length||1,f=a.area("width")/2/e,g=a.area("height")/2/e,h=a.area("width"),i=a.area("height")},this.scale=function(){return function(a){var b=d(e-a);return{x:b.x,y:b.y,width:2*Math.abs(h/2-b.x),height:2*Math.abs(i/2-b.y)}}},this.draw=function(){return{scale:this.scale(a)}}};return a},"chart.grid.core"),jui.define("chart.brush.core",["jquery","util.base"],function(a,b){var c=function(){function c(a,b){for(var c={},d={},e=0;e<b.length;e++)c[b[e]]||(d[b[e]]=[]);for(var e=0,f=a.length;f>e;e++){var g=a[e];for(var h in d)d[h].push(g[h])}for(var i in d)c[i]={min:Math.min.apply(Math,d[i]),max:Math.max.apply(Math,d[i])};return c}this.curvePoints=function(a){var b=[],c=[],d=a.length-1,e=[],f=[],g=[],h=[];for(e[0]=0,f[0]=2,g[0]=1,h[0]=a[0]+2*a[1],i=1;d-1>i;i++)e[i]=1,f[i]=4,g[i]=1,h[i]=4*a[i]+2*a[i+1];e[d-1]=2,f[d-1]=7,g[d-1]=0,h[d-1]=8*a[d-1]+a[d];for(var i=1;d>i;i++){var j=e[i]/f[i-1];f[i]=f[i]-j*g[i-1],h[i]=h[i]-j*h[i-1]}b[d-1]=h[d-1]/f[d-1];for(var i=d-2;i>=0;--i)b[i]=(h[i]-g[i]*b[i+1])/f[i];for(var i=0;d-1>i;i++)c[i]=2*a[i+1]-b[i+1];return c[d-1]=.5*(a[d]+b[d-1]),{p1:b,p2:c}},this.getScaleValue=function(a,b,c,d,e){function f(){var d=c-b,e=a-b,f=e/d;return f}var g=e-d,h=g*f();return h+d},this.eachData=function(a){if(b.typeCheck("function",a))for(var c=this.listData(),d=0,e=c.length;e>d;d++)a.call(this,d,c[d])},this.listData=function(){return this.axis.data},this.getData=function(a){return this.listData()[a]},this.getXY=function(a){var b=[],d={},e=this.listData().length,f=e;for(a!==!1&&(d=c(this.axis.data,this.brush.target));f--;)for(var g=this.axis.data[f],h=this.axis.x(f),i=0;i<this.brush.target.length;i++){var j=this.brush.target[i],k=g[j],l=this.axis.y(k);b[i]||(b[i]={x:new Array(e),y:new Array(e),value:new Array(e),min:[],max:[],length:e}),b[i].x[f]=h,b[i].y[f]=l,b[i].value[f]=k,a!==!1&&(b[i].min[f]=k==d[j].min,b[i].max[f]=k==d[j].max)}return b},this.getStackXY=function(a){var b=this.getXY(a);return this.eachData(function(a,c){for(var d=0,e=0;e<this.brush.target.length;e++){var f=this.brush.target[e],g=c[f];e>0&&(d+=c[this.brush.target[e-1]]),b[e].y[a]=this.axis.y(g+d)}}),b},this.addEvent=function(b,c,d){function e(b){var c=a(f.root).offset(),d=b.pageX-c.left,e=b.pageY-c.top;b.bgX=d,b.bgY=e,b.chartX=d-f.padding("left"),b.chartY=e-f.padding("top")}var f=this.chart,g={brush:this.brush,dataIndex:c,dataKey:null!=d?this.brush.target[d]:null,data:null!=c?this.getData(c):null};b.on("click",function(a){e(a),f.emit("click",[g,a])}),b.on("dblclick",function(a){e(a),f.emit("dblclick",[g,a])}),b.on("contextmenu",function(a){e(a),f.emit("rclick",[g,a]),a.preventDefault()}),b.on("mouseover",function(a){e(a),f.emit("mouseover",[g,a])}),b.on("mouseout",function(a){e(a),f.emit("mouseout",[g,a])}),b.on("mousemove",function(a){e(a),f.emit("mousemove",[g,a])}),b.on("mousedown",function(a){e(a),f.emit("mousedown",[g,a])}),b.on("mouseup",function(a){e(a),f.emit("mouseup",[g,a])})},this.createTooltip=function(a,b){var c=this.chart;return this.chart.svg.group({visibility:"hidden"},function(){c.text({"text-anchor":"middle","font-weight":c.theme("tooltipPointFontWeight")}),c.svg.circle({r:c.theme("tooltipPointRadius"),fill:a,stroke:b,"stroke-width":c.theme("tooltipPointBorderWidth")})})},this.showTooltip=function(a,b,c,d,e){var f=a.get(0);f.element.textContent=this.format(d),f.attr("left"==e?{x:-7,y:4,"text-anchor":"end"}:"right"==e?{x:7,y:4,"text-anchor":"start"}:"bottom"==e?{y:16}:{y:-7}),a.attr({visibility:0!=d?"visible":"hidden"}),a.translate(b,c)},this.color=function(a){return this.chart.color(a,this.brush)}};return c.setup=function(){return{target:null,colors:null,axis:0,index:null}},c},"chart.draw"),jui.define("chart.brush.bar",[],function(){var a=function(a,b,c){var d,e,f,g,h,i;this.getBarStyle=function(){return{borderColor:this.chart.theme("barBorderColor"),borderWidth:this.chart.theme("barBorderWidth"),borderOpacity:this.chart.theme("barBorderOpacity"),disableOpacity:this.chart.theme("barDisableBackgroundOpacity"),activeColor:this.chart.theme("barActiveBackgroundColor"),circleColor:this.chart.theme("barCircleBorderColor")}},this.addBarElement=function(a){this.barList||(this.barList=[]),this.barList.push(a)},this.getBarElement=function(a,b,c,d){var e=this.getBarStyle(),f=this.color(d),g=this.getData(c)[this.brush.target[d]],h=this.chart.svg.rect({width:a,height:b,fill:f,stroke:e.borderColor,"stroke-width":e.borderWidth,"stroke-opacity":e.borderOpacity});return 0!=g&&this.addEvent(h,c,d),this.addBarElement({index:c,target:this.brush.target[d],element:h,color:f}),h},this.setActiveEffect=function(a,b,c,d,e,f){for(var g=this.getBarStyle(),h=this.barList,i=0;i<h.length;i++)h[i].element.attr({fill:h[i].color});a.attr({fill:g.activeColor}),this.showTooltip(b,c,d,e,f)},this.setActiveEffectOption=function(a,b,c,d,e,f,g,h){if("max"==this.brush.display&&c||"min"==this.brush.display&&d){var i=this.getBarStyle(),j=this.createTooltip(b,i.circleColor);this.showTooltip(j,e,f,g,h),a.append(j)}},this.setActiveEvent=function(a,b,c,d,e,f){var g=this,h=this.getBarStyle(),i=this.barList;a.on(this.brush.activeEvent,function(a){for(var j=0;j<i.length;j++){var k=i[j].element;a.target==k.element?(k.attr({fill:h.activeColor}),g.showTooltip(b,c,d,e,f)):k.attr({fill:i[j].color})}})},this.setActiveEventOption=function(a,b,c,d,e,f){0!=e&&null!=this.brush.activeEvent&&(this.setActiveEvent(a,b,c,d,e,f),a.attr({cursor:"pointer"}))},this.drawBefore=function(){var j=this.getBarStyle();f=b.x(0),g=b.y.rangeBand(),h=g-2*c.outerPadding,i=(h-(c.target.length-1)*c.innerPadding)/c.target.length,d=a.svg.group(),e=this.createTooltip(j.activeColor,j.circleColor)},this.draw=function(){var g=this.getXY();return this.eachData(function(j,k){for(var l=b.y(j)-h/2,m=0;m<c.target.length;m++){var n=k[c.target[m]],o=b.x(0==n?c.minValue:n),p=Math.abs(f-o),q=o>=f?"right":"left",r=this.getBarElement(p,i,j,m),s=o,t=l+h/2;r=r.attr(o>=f?{x:f,y:l}:{x:f-p,y:l}),d.append(r),c.active==j&&this.setActiveEffect(r,e,s,t,n,q),this.setActiveEventOption(r,e,s,t,n,q),this.setActiveEffectOption(d,a.color(m,c),g[m].max[j],g[m].min[j],s,t,n,q),l+=i+c.innerPadding}}),d.append(e),d}};return a.setup=function(){return{minValue:0,outerPadding:2,innerPadding:1,active:null,activeEvent:null,display:null}},a},"chart.brush.core"),jui.define("chart.brush.column",[],function(){var a=function(a,b,c){var d,e,f,g,h,i,j;this.drawBefore=function(){f=this.getBarStyle(),g=b.y(0),h=b.x.rangeBand(),j=h-2*c.outerPadding,i=(h-2*c.outerPadding-(c.target.length-1)*c.innerPadding)/c.target.length,d=a.svg.group(),e=this.createTooltip(f.activeColor,f.circleColor)},this.draw=function(){var a=this.getXY();return this.eachData(function(f,h){for(var k=b.x(f)-j/2,l=0;l<c.target.length;l++){var m=h[c.target[l]],n=b.y(0==m?c.minValue:m),o=g>=n?"top":"bottom",p=this.getBarElement(i,Math.abs(g-n),f,l),q=k+i/2,r=n;p=p.attr(g>=n?{x:k,y:n}:{x:k,y:g}),d.append(p),c.active==f&&this.setActiveEffect(p,e,q,r,m,o),this.setActiveEventOption(p,e,q,r,m,o),this.setActiveEffectOption(d,this.color(l),a[l].max[f],a[l].min[f],q,r,m,o),k+=i+c.innerPadding}}),d.append(e),d}};return a},"chart.brush.bar"),jui.define("chart.brush.stackbar",[],function(){var a=function(a,b,c){var d,e,f;this.getBarElement=function(a,b){var c=this.getBarStyle(),d=this.color(b),e=this.getData(a)[this.brush.target[b]],f=this.chart.svg.rect({fill:d,stroke:c.borderColor,"stroke-width":c.borderWidth,"stroke-opacity":c.borderOpacity});return 0!=e&&this.addEvent(f,a,b),f},this.setActiveEffect=function(a){for(var b=this.getBarStyle(),c=this.barList,d=0;d<c.length;d++){var e=a==c[d]?1:b.disableOpacity;c[d].attr({opacity:e})}},this.setActiveEffectOption=function(){var a=this.brush.active;this.barList&&this.barList[a]&&this.setActiveEffect(this.barList[a])},this.setActiveEvent=function(a){var b=this;a.on(b.brush.activeEvent,function(){b.setActiveEffect(a)})},this.setActiveEventOption=function(a){null!=this.brush.activeEvent&&(this.setActiveEvent(a),a.attr({cursor:"pointer"}))},this.drawBefore=function(){d=a.svg.group(),e=b.y.rangeBand(),f=e-2*c.outerPadding},this.draw=function(){return this.eachData(function(e,g){for(var h=a.svg.group(),i=b.y(e)-f/2,j=b.x(0),k=0,l=0;l<c.target.length;l++){var m=g[c.target[l]]+k,n=b.x(m),o=this.getBarElement(e,l);o.attr({x:n>j?j:n,y:i,width:Math.abs(j-n),height:f}),h.append(o),j=n,k=m}this.setActiveEventOption(h),this.addBarElement(h),d.append(h)
}),this.setActiveEffectOption(),d}};return a.setup=function(){return{outerPadding:15,active:null,activeEvent:null}},a},"chart.brush.bar"),jui.define("chart.brush.stackcolumn",[],function(){var a=function(a,b,c){var d,e,f,g;this.drawBefore=function(){d=a.svg.group(),e=b.y(0),f=b.x.rangeBand(),g=f-2*c.outerPadding},this.draw=function(){return this.eachData(function(e,f){for(var h=a.svg.group(),i=b.x(e)-g/2,j=b.y(0),k=0,l=0;l<c.target.length;l++){var m=f[c.target[l]]+k,n=b.y(m),o=this.getBarElement(e,l);o.attr({x:i,y:j>n?n:j,width:g,height:Math.abs(j-n)}),h.append(o),j=n,k=m}this.setActiveEventOption(h),this.addBarElement(h),d.append(h)}),this.setActiveEffectOption(),d}};return a},"chart.brush.stackbar"),jui.define("chart.brush.fullstackbar",[],function(){var a=function(a,b,c){var d,e,f,g;this.drawBefore=function(){d=a.svg.group(),e=b.x(0),f=b.y.rangeBand(),g=f-2*c.outerPadding},this.drawText=function(a,b,c){var d=this.chart.text({x:b,y:c,"text-anchor":"middle"},a+"%");return d},this.draw=function(){return this.eachData(function(e,f){for(var h=a.svg.group(),i=b.y(e)-g/2,j=0,k=[],l=0;l<c.target.length;l++){var m=f[c.target[l]];j+=m,k.push(m)}for(var n=0,o=b.x.max(),l=k.length-1;l>=0;l--){var m=b.x.rate(k[l],j),p=this.getBarElement(e,l);if(p.attr({x:n,y:i,width:m,height:g}),h.append(p),c.showText){var q=Math.round(k[l]/j*o),r=n+m/2,s=i+g/2+5;h.append(this.drawText(q,r,s))}this.setActiveEventOption(h),n+=m}this.addBarElement(h),d.append(h)}),this.setActiveEffectOption(),d}};return a.setup=function(){return{outerPadding:15,active:null,activeEvent:null,showText:!1}},a},"chart.brush.stackbar"),jui.define("chart.brush.fullstackcolumn",[],function(){var a=function(a,b,c){var d,e,f,g;this.drawBefore=function(){d=a.svg.group(),e=b.y(0),f=b.x.rangeBand(),g=f-2*c.outerPadding},this.draw=function(){var e=a.area("height");return this.eachData(function(f,h){for(var i=a.svg.group(),j=b.x(f)-g/2,k=0,l=[],m=0;m<c.target.length;m++){var n=h[c.target[m]];k+=n,l.push(n)}for(var o=0,p=b.y.max(),m=l.length-1;m>=0;m--){var n=e-b.y.rate(l[m],k),q=this.getBarElement(f,m);if(q.attr({x:j,y:o,width:g,height:n}),i.append(q),c.showText){var r=Math.round(l[m]/k*p),s=j+g/2,t=o+n/2+8;i.append(this.drawText(r,s,t))}this.setActiveEventOption(i),o+=n}this.addBarElement(i),d.append(i)}),this.setActiveEffectOption(),d}};return a},"chart.brush.fullstackbar"),jui.define("chart.brush.bubble",[],function(){var a=function(a,b,c){function d(a,c,d,f){var g=e.getScaleValue(d.value,b.y.min(),b.y.max(),c.min,c.max);return a.svg.circle({cx:d.x,cy:d.y,r:g,fill:e.color(f),"fill-opacity":a.theme("bubbleBackgroundOpacity"),stroke:e.color(f),"stroke-width":a.theme("bubbleBorderWidth")})}var e=this;this.drawBubble=function(a,b,c){for(var e=a.svg.group({"clip-path":"url(#"+a.clipId+")"}),f=0;f<c.length;f++)for(var g=0;g<c[f].length;g++){var h=d(a,b,{x:c[f].x[g],y:c[f].y[g],value:c[f].value[g]},f);this.addEvent(h,g,f),e.append(h)}return e},this.draw=function(){return this.drawBubble(a,c,this.getXY())}};return a.setup=function(){return{min:5,max:30}},a},"chart.brush.core"),jui.define("chart.brush.candlestick",[],function(){var a=function(a,b,c){function d(b){for(var d={},e=0;e<c.target.length;e++){var f=c.target[e],g=a.get("series",f);d[g.type]=b[f]}return d}var e,f=0,g=0,h=0;this.drawBefore=function(){e=a.svg.group(),f=b.x.rangeBand(),g=.7*f,h=g/2},this.draw=function(){return this.eachData(function(c,f){var f=d(f),i=b.x(c),j=null,k=null,l=f.open,m=f.close,n=f.low,o=f.high;if(l>m){var p=b.y(l);k=a.svg.line({x1:i,y1:b.y(o),x2:i,y2:b.y(n),stroke:a.theme("candlestickInvertBorderColor"),"stroke-width":1}),j=a.svg.rect({x:i-h,y:p,width:g,height:Math.abs(b.y(m)-p),fill:a.theme("candlestickInvertBackgroundColor"),stroke:a.theme("candlestickInvertBorderColor"),"stroke-width":1})}else{var p=b.y(m);k=a.svg.line({x1:i,y1:b.y(o),x2:i,y2:b.y(n),stroke:a.theme("candlestickBorderColor"),"stroke-width":1}),j=a.svg.rect({x:i-h,y:p,width:g,height:Math.abs(b.y(l)-p),fill:a.theme("candlestickBackgroundColor"),stroke:a.theme("candlestickBorderColor"),"stroke-width":1})}this.addEvent(j,c,null),e.append(k),e.append(j)}),e}};return a},"chart.brush.core"),jui.define("chart.brush.ohlc",[],function(){var a=function(a,b,c){function d(b){for(var d={},e=0;e<c.target.length;e++){var f=c.target[e],g=a.get("series",f);d[g.type]=b[f]}return d}var e;this.drawBefore=function(){e=a.svg.group()},this.draw=function(){return this.eachData(function(c,f){var f=d(f),g=b.x(c),h=f.open,i=f.close,j=f.low,k=f.high,l=a.theme(h>i?"ohlcInvertBorderColor":"ohlcBorderColor"),m=a.svg.line({x1:g,y1:b.y(k),x2:g,y2:b.y(j),stroke:l,"stroke-width":1}),i=a.svg.line({x1:g,y1:b.y(i),x2:g+a.theme("ohlcBorderRadius"),y2:b.y(i),stroke:l,"stroke-width":1}),h=a.svg.line({x1:g,y1:b.y(h),x2:g-a.theme("ohlcBorderRadius"),y2:b.y(h),stroke:l,"stroke-width":1});this.addEvent(m,c,null),e.append(m),e.append(i),e.append(h)}),e}};return a},"chart.brush.core"),jui.define("chart.brush.donut",["util.math"],function(a){var b=function(){var b,c,d,e,f,g,h;this.drawDonut=function(b,c,d,e,f,g,h,i){i=i||!1;var j=this.chart.svg.group(),k=this.chart.svg.path(h),l=Math.abs(e-d),m=a.rotate(0,-e,a.radian(f)),n=m.x,o=m.y,p=a.rotate(0,-d,a.radian(f)),q=p.x,r=p.y;if(k.MoveTo(n,o),m=a.rotate(n,o,a.radian(g)),p=a.rotate(q,r,a.radian(g)),j.translate(b,c),k.Arc(e,e,0,g>180?1:0,1,m.x,m.y),k.LineTo(p.x,p.y),k.Arc(d,d,0,g>180?1:0,0,q,r),k.ClosePath(),j.append(k),i){var s=a.rotate(0,-d-l/2,a.radian(f)),t=s.x,u=s.y,v=a.rotate(t,u,a.radian(g)),w=this.chart.svg.circle({cx:v.x,cy:v.y,r:l/2,fill:h.fill});j.append(w);var x=this.chart.svg.circle({cx:v.x,cy:v.y,r:3,fill:"white"});j.append(x)}return j},this.drawBefore=function(){var a=this.chart.area("width"),i=this.chart.area("height"),j=a;j>i&&(j=i),b=j/2,c=a/2,d=i/2,e=-b,f=0,g=Math.abs(e),h=g-this.brush.size},this.draw=function(){for(var a=this.chart.svg.group(),b=this.brush.target,e=this.getData(0),f=360,i=0,j=0,k=0;k<b.length;k++)j+=e[b[k]];for(var k=0;k<b.length;k++){var l=e[b[k]],m=f*(l/j),n=this.drawDonut(c,d,h,g,i,m,{fill:this.color(k),stroke:this.chart.theme("donutBorderColor"),"stroke-width":this.chart.theme("donutBorderWidth")});this.addEvent(n,0,k),a.append(n),i+=m}return a}};return b.setup=function(){return{size:50}},b},"chart.brush.core"),jui.define("chart.brush.equalizer",[],function(){var a=function(a,b,c){var d,e,f,g,h;this.drawBefore=function(){d=a.svg.group(),e=b.y(0),f=b.x.rangeBand(),h=(f-2*c.outerPadding)/2,g=(f-2*c.outerPadding-(c.target.length-1)*c.innerPadding)/c.target.length},this.draw=function(){return this.eachData(function(f,i){for(var j=b.x(f)-h,k=0;k<c.target.length;k++){var l=a.svg.group(),m=b.y(i[c.target[k]]),n=1.5,o=e,p=0;if(e>=m)for(;o>m;){var q=o-c.unit<m?Math.abs(o-m):c.unit,r=a.svg.rect({x:j,y:o-q,width:g,height:q,fill:this.color(Math.floor(p/c.gap))});o-=q+n,p++,l.append(r)}else for(;m>o;){var q=o+c.unit>m?Math.abs(o-m):c.unit,r=a.svg.rect({x:j,y:o,width:g,height:q,fill:this.color(Math.floor(p/c.gap))});o+=q+n,p++,l.append(r)}this.addEvent(l,f,k),d.append(l),j+=g+c.innerPadding}}),d}};return a.setup=function(){return{innerPadding:10,outerPadding:15,unit:5,gap:5}},a},"chart.brush.core"),jui.define("chart.brush.line",[],function(){var a=function(){this.setActiveEffect=function(a){for(var b=this.lineList,c=0;c<b.length;c++){var d=a==b[c].element?1:this.chart.theme("lineDisableBorderOpacity");b[c].element.attr({opacity:d}),null!=b[c].tooltip&&b[c].tooltip.attr({opacity:d})}},this.setActiveEvent=function(a){var b=this;a.on(this.brush.activeEvent,function(){b.setActiveEffect(a)})},this.addLineElement=function(a){this.lineList||(this.lineList=[]),this.lineList.push(a)},this.createLine=function(a,b){var c=a.x,d=a.y,e=this.chart.svg.path({stroke:this.color(b),"stroke-width":this.chart.theme("lineBorderWidth"),fill:"transparent",cursor:null!=this.brush.activeEvent?"pointer":"normal"}).MoveTo(c[0],d[0]);if("curve"==this.brush.symbol)for(var f=this.curvePoints(c),g=this.curvePoints(d),h=0;h<c.length-1;h++)e.CurveTo(f.p1[h],g.p1[h],f.p2[h],g.p2[h],c[h+1],d[h+1]);else for(var h=0;h<c.length-1;h++){if("step"==this.brush.symbol){var i=c[h]+(c[h+1]-c[h])/2;e.LineTo(i,d[h]),e.LineTo(i,d[h+1])}e.LineTo(c[h+1],d[h+1])}return e},this.drawTooltip=function(a,b,c){for(var d=this.brush.display,e=this.chart.theme("lineCircleBorderColor"),f=0;f<b.x.length;f++)if("max"==d&&b.max[f]||"min"==d&&b.min[f]){var g=this.createTooltip(this.color(c),e),h="max"==d&&b.max[f]?"top":"bottom";this.showTooltip(g,b.x[f],b.y[f],b.value[f],h),a.append(g),this.lineList[c].tooltip=g}},this.drawLine=function(a){for(var b=this.brush,c=this.chart.svg.group(),d=0;d<a.length;d++){var e=this.createLine(a[d],d);this.addEvent(e,null,d),c.append(e),this.addLineElement({element:e,tooltip:null}),null!=b.display&&this.drawTooltip(c,a[d],d),null!=b.activeEvent&&this.setActiveEvent(e)}if(this.lineList)for(var f=0;f<this.lineList.length;f++)b.active==b.target[f]&&this.setActiveEffect(e);return c},this.draw=function(){return this.drawLine(this.getXY())}};return a.setup=function(){return{symbol:"normal",display:null,active:null,activeEvent:null}},a},"chart.brush.core"),jui.define("chart.brush.path",[],function(){var a=function(a,b,c){this.draw=function(){for(var d=a.svg.group(),e=0,f=c.target.length;f>e;e++){var g=this.color(e),h=a.svg.path({fill:g,"fill-opacity":a.theme("pathBackgroundOpacity"),stroke:g,"stroke-width":a.theme("pathBorderWidth")});d.append(h),this.eachData(function(d,f){var g=b.c(d,f[c.target[e]]),i=g.x-a.area("x"),j=g.y-a.area("y");0==d?h.MoveTo(i,j):h.LineTo(i,j)}),h.ClosePath()}return d}};return a},"chart.brush.core"),jui.define("chart.brush.pie",["util.math"],function(a){var b=function(b,c,d){var e,f,g,h;this.drawPie=function(b,c,d,e,f,g,h){var i=b.svg.group(),j=b.svg.path(h),k=a.rotate(0,-e,a.radian(f)),l=k.x,m=k.y;return j.MoveTo(l,m),k=a.rotate(l,m,a.radian(g)),i.translate(c,d),j.Arc(e,e,0,g>180?1:0,1,k.x,k.y),j.LineTo(0,0),j.ClosePath(),i.append(j),i},this.drawBefore=function(){c.c||(c.c=function(){return{x:0,y:0,width:b.area("width"),height:b.area("height")}})},this.drawUnit=function(a,i,j){var k=c.c(a),l=k.width,m=k.height,n=k.x,o=k.y,p=l;p>m&&(p=m),e=p/2,f=l/2+n,g=m/2+o,h=e;for(var q=d.target,r=360,s=0,t=0,u=0;u<q.length;u++)t+=i[q[u]];for(var u=0;u<q.length;u++){var v=i[q[u]],w=r*(v/t),x=this.drawPie(b,f,g,h,s,w,{fill:this.color(u),stroke:b.theme("pieBorderColor"),"stroke-width":b.theme("pieBorderWidth")});this.addEvent(x,a,u),j.append(x),s+=w}},this.draw=function(){var a=b.svg.group();return this.eachData(function(b,c){this.drawUnit(b,c,a)}),a}};return b},"chart.brush.core"),jui.define("chart.brush.scatter",[],function(){var a=function(){this.createScatter=function(a,b){var c=this,d=null,e=this.chart.get("series",this.brush.target[b]),f=e.symbol?e.symbol:this.brush.symbol,g=h=this.brush.size,i=this.color(b),j=this.chart.theme("scatterBorderColor"),k=this.chart.theme("scatterBorderWidth");return d="triangle"==f||"cross"==f?this.chart.svg.group({width:g,height:h},function(){if("triangle"==f){var a=c.chart.svg.polygon();a.point(0,h).point(g,h).point(g/2,0)}else c.chart.svg.line({stroke:i,"stroke-width":2*k,x1:0,y1:0,x2:g,y2:h}),c.chart.svg.line({stroke:i,"stroke-width":2*k,x1:0,y1:g,x2:h,y2:0})}).translate(a.x-g/2,a.y-h/2):"rectangle"==f?this.chart.svg.rect({width:g,height:h,x:a.x-g/2,y:a.y-h/2}):this.chart.svg.ellipse({rx:g/2,ry:h/2,cx:a.x,cy:a.y}),"cross"!=f&&d.attr({fill:i,stroke:j,"stroke-width":k}).hover(function(){d.attr({fill:c.chart.theme("scatterHoverColor"),stroke:i,"stroke-width":2*k})},function(){d.attr({fill:i,stroke:j,"stroke-width":k})}),d},this.drawScatter=function(a){for(var b=this.chart.svg.group(),c=0;c<a.length;c++)for(var d=0;d<a[c].length;d++){var e=this.createScatter({x:a[c].x[d],y:a[c].y[d],max:a[c].max[d],min:a[c].min[d],value:a[c].value[d]},c);this.addEvent(e,d,c),b.append(e)}return b},this.draw=function(){return this.drawScatter(this.getXY())}};return a.setup=function(){return{symbol:"circle",size:7}},a},"chart.brush.core"),jui.define("chart.brush.scatterpath",[],function(){var a=function(){this.drawScatter=function(a){for(var b=height=this.brush.size,c=this.color(0),d=this.brush.strokeWidth,e=this.chart.svg.group(),f=this.chart.svg.path({fill:c,stroke:c,"stroke-width":d}),g=f.getSymbolTemplate(b,height),h=0;h<a.length;h++)for(var i=this.chart.get("series",this.brush.target[h]),j=i&&i.symbol?i.symbol:this.brush.symbol,k=a[h].x.length;k--;)f.template(0|a[h].x[k],0|a[h].y[k],g[j]);return e.append(f),e},this.draw=function(){return this.drawScatter(this.getXY(!1))}};return a.setup=function(){return{symbol:"circle",size:7,strokeWidth:1}},a},"chart.brush.core"),jui.define("chart.brush.bargauge",[],function(){var a=function(a,b,c){this.drawBefore=function(){b.c||(b.c=function(){return{x:0,y:0,width:a.area("width"),height:a.area("height")}})},this.draw=function(){var d=b.c(),e=d.width,f=d.x,g=d.y,h=a.svg.group();if(c.split)var i=e;else var i=e;return this.eachData(function(b,d){var e=a.svg.group({"class":"bar"});e.append(a.text({x:f,y:g+c.size/2+c.cut,"text-anchor":"end",fill:this.color(b)},d[c.title]||"")),e.append(a.svg.rect({x:f+c.cut,y:g,width:i,height:c.size,fill:a.theme("gaugeBackgroundColor")}));var j=d.value*i/100,k=(100-d.value)*i/100,l=f+c.cut;if("center"==c.align?l+=i/2-j/2:"right"==c.align&&(l+=i-j),e.append(a.svg.rect({x:l,y:g,width:j,height:c.size,fill:a.color(b,c)})),c.split)var m=f+j+2*c.cut+k,n="start",o=a.color(b,c);else{var m=f+2*c.cut,n="start",o="white";"center"==this.align?(m=f+c.cut+i/2,n="middle"):"right"==c.align&&(m=f+i,n="end")}e.append(a.text({x:m,y:g+c.size/2+c.cut,"text-anchor":n,fill:o},c.format?c.format(d.value):d.value+"%")),this.addEvent(e,b,null),h.append(e),g+=c.size+c.cut}),h}};return a.setup=function(){return{cut:5,size:20,split:!1,align:"left",title:"title"}},a},"chart.brush.core"),jui.define("chart.brush.circlegauge",[],function(){var a=function(a,b,c){var d,e,f,g;this.drawBefore=function(){var b=b||{};b.c||(b.c=function(){return{x:0,y:0,width:a.area("width"),height:a.area("height")}});var c=b.c(),h=c.width,i=c.height,j=c.x,k=c.y,l=h;l>i&&(l=i),d=l/2,e=h/2+j,f=i/2+k,g=d},this.draw=function(){var b=(c.value-c.min)/(c.max-c.min),d=a.svg.group();return d.append(a.svg.circle({cx:e,cy:f,r:g,fill:a.theme("gaugeBackgroundColor"),stroke:this.color(0),"stroke-width":2})),d.append(a.svg.circle({cx:e,cy:f,r:g*b,fill:this.color(0)})),this.addEvent(d,null,null),d}};return a.setup=function(){return{min:0,max:100,value:0}},a},"chart.brush.core"),jui.define("chart.brush.fillgauge",["jquery"],function(a){var b=function(b,c,d){function e(a){var c=(d.value-d.min)/(d.max-d.min);if("vertical"==a)var e=b.area("height")*c,f=b.area("width"),g=0,h=b.area("height")-e;else var e=b.area("height"),f=b.area("width")*c,g=0,h=0;l.attr({x:g,y:h,width:f,height:e})}function f(a,c){a.append(b.svg.path({x:0,y:0,fill:b.theme("gaugeBackgroundColor"),d:c})),a.append(b.svg.path({x:0,y:0,fill:m.color(0),d:c,"clip-path":"url(#"+k+")"}))}var g,h,i,j,k,l,m=this;this.drawBefore=function(){var a=a||{};a.c||(a.c=function(){return{x:0,y:0,width:b.area("width"),height:b.area("height")}});var c=a.c(),d=c.width,e=c.height,f=c.x,m=c.y,n=d;n>e&&(n=e),g=n/2,h=d/2+f,i=e/2+m,j=g,k=b.createId("fill-gauge");var o=b.svg.clipPath({id:k});l=b.svg.rect({x:0,y:0,width:0,height:0}),o.append(l),b.defs.append(o)},this.draw=function(){var c=b.svg.group({opacity:.8});return e(d.direction),""!=d.svg||""!=d.path?""!=d.svg?a.ajax({url:d.svg,async:!1,success:function(b){var d=a(b).find("path").attr("d");f(c,d)}}):f(c,d.path):"circle"==d.shape?(c.append(b.svg.circle({cx:h,cy:i,r:j,fill:b.theme("gaugeBackgroundColor")})),c.append(b.svg.circle({cx:h,cy:i,r:j,fill:b.color(0,d),"clip-path":"url(#"+k+")"}))):"rectangle"==d.shape&&(c.append(b.svg.rect({x:0,y:0,width:b.area("width"),height:b.area("height"),fill:b.theme("gaugeBackgroundColor")})),c.append(b.svg.rect({x:0,y:0,width:b.area("width"),height:b.area("height"),fill:this.color(0),"clip-path":"url(#"+k+")"}))),c}};return b.setup=function(){return{min:0,max:100,value:0,shape:"circle",direction:"vertical",svg:"",path:""}},b},"chart.brush.core"),jui.define("chart.brush.area",[],function(){var a=function(){this.drawArea=function(a){for(var b=this.chart.svg.group(),c=this.axis.y(this.axis.y.min()),d=0;d<a.length;d++){var e=this.createLine(a[d],d),f=a[d].x;e.LineTo(f[f.length-1],c),e.LineTo(f[0],c),e.ClosePath(),e.attr({fill:this.color(d),"fill-opacity":this.chart.theme("areaBackgroundOpacity"),"stroke-width":0}),this.addEvent(e,null,d),b.prepend(e)}return b},this.draw=function(){return this.drawArea(this.getXY())}};return a},"chart.brush.line"),jui.define("chart.brush.stackline",[],function(){var a=function(){this.draw=function(){return this.drawLine(this.getStackXY())}};return a},"chart.brush.line"),jui.define("chart.brush.stackarea",[],function(){var a=function(){this.draw=function(){return this.drawArea(this.getStackXY())}};return a},"chart.brush.area"),jui.define("chart.brush.stackscatter",[],function(){var a=function(){this.draw=function(){return this.drawScatter(this.getStackXY())}};return a},"chart.brush.scatter"),jui.define("chart.brush.gauge",["util.math"],function(a){var b=function(b,c,d){function e(c,e,f,g,k){var m=b.svg.group({"class":"gauge text"}).translate(h,i);m.append(b.svg.text({x:0,y:d.arrow?70:10,"text-anchor":"middle","font-family":b.theme("fontFamily"),"font-size":"3em","font-weight":1e3,fill:l.color(0)},k+"")),""!=d.unitText&&m.append(b.text({x:0,y:100,"text-anchor":"middle","font-family":b.theme("fontFamily"),"font-size":"1.5em","font-weight":500,fill:b.theme("gaugeFontColor")},d.unitText));var n=0,o=-j,p=a.rotate(n,o,a.radian(c));n=p.x,o=p.y,m.append(b.text({x:p.x+30,y:p.y+20,"text-anchor":"middle","font-family":b.theme("fontFamily"),fill:b.theme("gaugeFontColor")},f+""));var p=a.rotate(n,o,a.radian(e));return m.append(b.text({x:p.x-20,y:p.y+20,"text-anchor":"middle","font-family":b.theme("fontFamily"),fill:b.theme("gaugeFontColor")},g+"")),m}function f(a,c){var d=b.svg.group().translate(h,i),e=0,f=-(j+5),g=b.svg.path({stroke:b.theme("gaugeArrowColor"),"stroke-width":.2,fill:b.theme("gaugeArrowColor")});return g.MoveTo(e,f),g.LineTo(5,0),g.LineTo(-5,0),g.ClosePath(),g.rotate(a),d.append(g),g.rotate(c+a),d.append(b.svg.circle({cx:0,cy:0,r:5,fill:b.theme("gaugeArrowColor")})),d.append(b.svg.circle({cx:0,cy:0,r:2,fill:b.theme("gaugeArrowColor")})),d}var g,h,i,j,k,l=this;this.drawBefore=function(){var a=a||{};a.c||(a.c=function(){return{x:0,y:0,width:b.area("width"),height:b.area("height")}});var c=a.c(),e=c.width,f=c.height,l=c.x,m=c.y,n=e;n>f&&(n=f),g=n/2,h=e/2+l,i=f/2+m,j=g,k=j-d.size},this.draw=function(){var a=b.svg.group({"class":"brush gauge"}),c=(d.value-d.min)/(d.max-d.min),g=d.endAngle*c;d.endAngle>=360&&(d.endAngle=359.99999);var l=this.drawDonut(h,i,k,j,d.startAngle+g,d.endAngle-g,{fill:b.theme("gaugeBackgroundColor")});return a.append(l),l=this.drawDonut(h,i,k,j,d.startAngle,g,{fill:this.color(0)}),a.append(l),d.arrow&&(l=f(d.startAngle,g),a.append(l)),l=e(d.startAngle,d.endAngle,d.min,d.max,d.value),a.append(l),a}};return b.setup=function(){return{min:0,max:100,value:0,size:60,startAngle:0,endAngle:360,arrow:!0,unitText:""}},b},"chart.brush.donut"),jui.define("chart.brush.fullgauge",["util.math"],function(){var a=function(a,b,c){function d(b,d,e,h,i){var k=a.svg.group({"class":"gauge text"});return k.translate(f,g),""!=c.text&&k.append(a.svg.text({x:0,y:10,"text-anchor":"middle","font-family":a.theme("fontFamily"),"font-size":"3.5em","font-weight":1e3,fill:j.color(0)},i+"")),""!=c.unitText&&k.append(a.text({x:0,y:40,"text-anchor":"middle","font-family":a.theme("fontFamily"),"font-size":"2em","font-weight":500,fill:a.theme("gaugeFontColor")},c.unitText)),k}var e,f,g,h,i,j=this;this.drawBefore=function(){var b=b||{};b.c||(b.c=function(){return{x:0,y:0,width:a.area("width"),height:a.area("height")}});var d=b.c(),j=d.width,k=d.height,l=d.x,m=d.y,n=j;n>k&&(n=k),e=n/2,f=j/2+l,g=k/2+m,h=e,i=h-c.size},this.draw=function(){var b=a.svg.group(),e=(c.value-c.min)/(c.max-c.min),j=c.endAngle*e;c.endAngle>=360&&(c.endAngle=359.99999);var k=this.drawDonut(f,g,i,h,c.startAngle+j,c.endAngle-j,{fill:a.theme("gaugeBackgroundColor")});return b.append(k),k=this.drawDonut(f,g,i,h,c.startAngle,j,{fill:this.color(0)}),b.append(k),k=d(c.startAngle,c.endAngle,c.min,c.max,c.value),b.append(k),b}};return a.setup=function(){return{min:0,max:100,value:0,size:60,startAngle:0,endAngle:300,text:"",unitText:""}},a},"chart.brush.donut"),jui.define("chart.brush.stackgauge",["util.math"],function(){var a=function(a,b,c){var d,e,f,g;this.drawBefore=function(){b.c||(b.c=function(){return{x:0,y:0,width:a.area("width"),height:a.area("height")}});var c=b.c(),h=c.width,i=c.height,j=c.x,k=c.y,l=h;l>i&&(l=i),d=l/2,e=h/2+j,f=i/2+k,g=d},this.draw=function(){var b=a.svg.group();return this.eachData(function(d,h){var i=(h[c.target]-c.min)/(c.max-c.min),j=c.endAngle*i,k=g-c.size+c.cut;c.endAngle>=360&&(c.endAngle=359.99999);var l=this.drawDonut(e,f,k,g,c.startAngle+j,c.endAngle-j,{fill:a.theme("gaugeBackgroundColor")});b.append(l),l=this.drawDonut(e,f,k,g,c.startAngle,j,{fill:this.color(d)},!0),b.append(l),b.append(a.text({x:e+2,y:f+Math.abs(g)-5,fill:this.color(d),"font-size":"12px","font-weight":"bold"},h[c.title]||"")),g-=c.size}),b}};return a.setup=function(){return{min:0,max:100,cut:5,size:24,startAngle:-180,endAngle:360,title:"title"}},a},"chart.brush.donut"),jui.define("chart.brush.waterfall",[],function(){var a=function(a,b,c){var d,e,f,g,h,i,j;this.drawBefore=function(){d=a.svg.group(),j=c.outerPadding,e=this.listData().length,f=b.y(0),g=b.x.rangeBand(),i=g-2*j,h=(g-2*j-(c.target.length-1))/c.target.length},this.draw=function(){var g=c.target[0],k=a.theme("waterfallLineColor");return this.eachData(function(l,m){var n=b.x(l)-i/2,o=b.y(m[g]),p=null,q=null;if(0==l||l==e-1&&c.end){var r=a.theme("waterfallEdgeBackgroundColor");p=a.svg.rect(f>=o?{x:n,y:o,width:h,height:Math.abs(f-o),fill:r}:{x:n,y:f,width:h,height:Math.abs(f-o),fill:r})}else{var s=this.getData(l-1)[g],t=m[g],u=b.y(s),v=b.y(t),w=u-v;p=a.svg.rect(w>0?{x:n,y:u-w,width:h,height:Math.abs(w),fill:a.theme("waterfallBackgroundColor")}:{x:n,y:u,width:h,height:Math.abs(w),fill:a.theme("waterfallInvertBackgroundColor")}),c.line&&(q=a.svg.line({x1:n-2*j,y1:v+w,x2:n,y2:v+w,stroke:k,"stroke-width":1,"stroke-dasharray":a.theme("waterfallLineDashArray")}),d.append(q))}this.addEvent(p,l,0),d.append(p),n+=h}),d}};return a.setup=function(){return{line:!0,end:!1,outerPadding:5}},a},"chart.brush.core"),jui.define("chart.brush.splitline",["util.base"],function(a){var b=function(){this.createLine=function(b,c){var d,e,f={stroke:this.color(c),"stroke-width":this.chart.theme("lineBorderWidth"),fill:"transparent"},g=this.brush.split,h=this.brush.symbol,i=b.x,j=b.y,k=this.chart.svg.group(),l=this.chart.svg.path(f).MoveTo(i[0],j[0]);"curve"==h&&(d=this.curvePoints(i),e=this.curvePoints(j));for(var m=0;m<i.length-1;m++){if(0==k.childrens.length&&(a.typeCheck("integer",g)&&m==g||a.typeCheck("date",g)&&this.axis.x.invert(i[m]).getTime()>=g.getTime())){var n=this.chart.theme("lineSplitBorderColor"),o=this.chart.theme("lineSplitBorderOpacity");k.append(l),f.stroke=null!=n?n:f.stroke,f["stroke-opacity"]=o,l=this.chart.svg.path(f).MoveTo(i[m],j[m])}if("step"==h){var p=i[m]+(i[m+1]-i[m])/2;l.LineTo(p,j[m]),l.LineTo(p,j[m+1])}"curve"!=h?l.LineTo(i[m+1],j[m+1]):l.CurveTo(d.p1[m],e.p1[m],d.p2[m],e.p2[m],i[m+1],j[m+1])}return k.append(l),k},this.drawLine=function(a){for(var b=this.chart.svg.group(),c=0;c<a.length;c++){var d=this.createLine(a[c],c);this.addEvent(d,null,c),b.append(d)}return b},this.draw=function(){return this.drawLine(this.getXY())}};return b.setup=function(){return{symbol:"normal",split:null}},b},"chart.brush.core"),jui.define("chart.brush.splitarea",["util.base"],function(a){var b=function(){this.drawArea=function(b){for(var c=this.chart.svg.group(),d=this.chart.area("height"),e=this.brush.split,f=this.chart.theme("areaSplitBackgroundColor"),g=0;g<b.length;g++){var h={fill:this.color(g),"fill-opacity":this.chart.theme("areaBackgroundOpacity"),"stroke-width":0},i=this.createLine(b[g],g),j=b[g].x;if(a.typeCheck("date",e))for(var k=0;k<j.length-1;k++)if(this.axis.x.invert(j[k]).getTime()>=e.getTime()){e=k;break}i.each(function(a,b){0==a?(e=null!=e?e:j.length-1,b.LineTo(j[e],d),b.LineTo(j[0],d),b.attr(h)):(h.fill=f,b.LineTo(j[j.length-1],d),b.LineTo(j[e],d),b.attr(h)),b.ClosePath()}),this.addEvent(i,null,g),c.prepend(i)}return c},this.draw=function(){return this.drawArea(this.getXY())}};return b},"chart.brush.splitline"),jui.define("chart.brush.rangecolumn",[],function(){var a=function(a,b,c){var d,e,f,g,h,i,j,k,l;this.drawBefore=function(){d=a.svg.group(),h=c.outerPadding,i=c.innerPadding,e=b.x.rangeBand(),g=e-2*h,f=(e-2*h-(c.target.length-1)*i)/c.target.length,j=a.theme("columnBorderColor"),k=a.theme("columnBorderWidth"),l=a.theme("columnBorderOpacity")},this.draw=function(){return this.eachData(function(e,h){for(var m=b.x(e)-g/2,n=0;n<c.target.length;n++){var o=h[c.target[n]],p=b.y(o[1]),q=b.y(o[0]),r=a.svg.rect({x:m,y:p,width:f,height:Math.abs(q-p),fill:this.color(n),stroke:j,"stroke-width":k,"stroke-opacity":l});this.addEvent(r,e,n),d.append(r),m+=f+i}}),d}};return a.setup=function(){return{outerPadding:2,innerPadding:1}},a},"chart.brush.core"),jui.define("chart.brush.rangebar",[],function(){var a=function(a,b,c){var d,e,f,g,h,i,j,k,l;this.drawBefore=function(){d=a.svg.group(),h=c.outerPadding,i=c.innerPadding,e=b.y.rangeBand(),f=e-2*h,g=(f-(c.target.length-1)*i)/c.target.length,j=a.theme("barBorderColor"),k=a.theme("barBorderWidth"),l=a.theme("barBorderOpacity")},this.draw=function(){return this.eachData(function(e,h){for(var m=a.svg.group(),n=b.y(e)-f/2,o=0;o<c.target.length;o++){var p=h[c.target[o]],q=b.x(p[1]),r=b.x(p[0]),s=a.svg.rect({x:r,y:n,height:g,width:Math.abs(r-q),fill:this.color(o),stroke:j,"stroke-width":k,"stroke-opacity":l});this.addEvent(s,e,o),m.append(s),n+=g+i}d.append(m)}),d}};return a.setup=function(){return{outerPadding:2,innerPadding:1}},a},"chart.brush.core"),jui.define("chart.brush.focus",[],function(){var a=function(a,b,c){var d;this.drawFocus=function(b,e){var f=a.theme("focusBorderColor"),g=a.theme("focusBorderWidth"),h=a.theme("focusBackgroundColor"),i=a.theme("focusBackgroundOpacity"),j=a.area("height");return d=a.svg.group({},function(){var d=b,k=e;c.hide||(a.svg.line({stroke:f,"stroke-width":g,x1:0,y1:0,x2:0,y2:j}).translate(d,0),a.svg.rect({width:Math.abs(k-d),height:j,fill:h,opacity:i}).translate(d,0),a.svg.line({stroke:f,"stroke-width":g,x1:0,y1:0,x2:0,y2:j}).translate(k,0))})},this.draw=function(){var a=0,d=0;return c.hide=!1,-1==c.start&&-1==c.end&&(c.hide=!0),"block"==b.x.type?(a=b.x(c.start)-b.x.rangeBand()/2,d=b.x(c.end)+b.x.rangeBand()/2):(a=b.x(c.start),d=b.x(c.end)),this.drawFocus(a,d)}};return a.setup=function(){return{start:-1,end:-1}},a},"chart.brush.core"),jui.define("chart.brush.pin",[],function(){var a=function(a,b,c){var d,e=6;this.draw=function(){var f=a.theme("pinBorderColor"),g=a.theme("pinBorderWidth");return d=a.svg.group({},function(){var d=b.x(c.split),h=d-e/2,i=c.format(b.x.invert(d));a.text({"text-anchor":"middle","font-size":a.theme("pinFontSize"),fill:a.theme("pinFontColor")},i).translate(h,-4),a.svg.polygon({fill:f}).point(e,0).point(e/2,e).point(0,0).translate(h,0),a.svg.line({stroke:f,"stroke-width":g,x1:e/2,y1:0,x2:e/2,y2:a.area("height")}).translate(h,0)})}};return a.setup=function(){return{split:0,showValue:!1,format:null}},a},"chart.brush.core"),jui.define("chart.widget.core",["jquery","util.base"],function(a,b){var c=function(){function c(a){var c=[0];return b.typeCheck("array",a)?c=a:b.typeCheck("integer",a)&&(c=[a]),c}this.balloonPoints=function(a,b,c,d){var e=[];return"top"==a?(e.push([0,0].join(",")),e.push([b,0].join(",")),e.push([b,c].join(",")),e.push([b/2+d/2,c].join(",")),e.push([b/2,c+d].join(",")),e.push([b/2-d/2,c].join(",")),e.push([0,c].join(","))):"bottom"==a?(e.push([0,d].join(",")),e.push([b/2-d/2,d].join(",")),e.push([b/2,0].join(",")),e.push([b/2+d/2,d].join(",")),e.push([b,d].join(",")),e.push([b,d+c].join(",")),e.push([0,d+c].join(","))):"left"==a?(e.push([0,0].join(",")),e.push([b,0].join(",")),e.push([b,c/2-d/2].join(",")),e.push([b+d,c/2].join(",")),e.push([b,c/2+d/2].join(",")),e.push([b,c].join(",")),e.push([0,c].join(","))):"right"==a&&(e.push([0,0].join(",")),e.push([b,0].join(",")),e.push([b,c].join(",")),e.push([0,c].join(",")),e.push([0,c/2+d/2].join(",")),e.push([0-d,c/2].join(",")),e.push([0,c/2-d/2].join(","))),e.push([0,0].join(",")),e.join(" ")},this.eachBrush=function(a){if(b.typeCheck("function",a))for(var d=c(this.widget.brush),e=0;e<d.length;e++)a.apply(this,[e,this.chart.get("brush",d[e])])},this.listBrush=function(){for(var a=c(this.widget.brush),b=[],d=0;d<a.length;d++)b[d]=this.chart.get("brush",a[d]);return b},this.getBrush=function(a){return this.listBrush()[a]},this.existBrush=function(b){var d=c(this.widget.brush);return-1==a.inArray(b,d)?!1:!0},this.isRender=function(){return this.widget.render===!0?!0:!1},this.on=function(a,b){return this.chart.on(a,b,this.isRender())}};return c.setup=function(){return{brush:0,render:!1,index:0}},c},"chart.draw"),jui.define("chart.widget.tooltip",["jquery"],function(){var a=function(a,b,c){function d(a,b){if(!n[a]){var c=document.createElementNS("http://www.w3.org/2000/svg","tspan");h.element.appendChild(c),n[a]=c}n[a].textContent=b}function e(a,b,d){return"function"==typeof c.format?c.format.apply(j.chart,[a,b,d]):b?a+": "+j.format(b):a}function f(b){if(b.dataKey&&c.all===!1){var f=a.get("series",b.dataKey),g=b.dataKey,i=null!=b.data?b.data[g]:null;"bottom"==c.orient&&h.attr({y:m+l});var j=e(f.text?f.text:g,i,b.data);d(0,j),h.attr({"text-anchor":"middle"})}else{for(var o=b.brush,p=0;p<o.target.length;p++){var q=o.target[p],f=a.get("series",q),r=k,s=m*p+2*k,i=null!=b.data?b.data[q]:null;"bottom"==c.orient&&(s+=l);var j=e(f.text?f.text:q,i,b.data);d(p,j),n[p].setAttribute("x",r),n[p].setAttribute("y",s)}h.attr({"text-anchor":"inherit"})}}var g,h,i,j=this,k=7,l=7,m=14,n=[];this.drawBefore=function(){g=a.svg.group({visibility:"hidden"},function(){i=a.svg.polygon({fill:a.theme("tooltipBackgroundColor"),"fill-opacity":a.theme("tooltipBackgroundOpacity"),stroke:a.theme("tooltipBorderColor"),"stroke-width":1}),h=a.svg.text({"font-family":a.theme("fontFamily"),"font-size":a.theme("tooltipFontSize"),fill:a.theme("tooltipFontColor"),y:m})})},this.draw=function(){var a,b,d=this,e=!1;return this.on("mouseover",function(j){if(!e&&d.existBrush(j.brush.index)&&(j.dataKey||j.data)){f(j);var m=h.size();a=m.width+2*k,b=m.height+k,h.attr({x:a/2}),i.attr({points:d.balloonPoints(c.orient,a,b,l)}),g.attr({visibility:"visible"}),e=!0}}),this.on("mousemove",function(d,f){if(e){var h=f.bgX-a/2,i=f.bgY-b-l-k/2;("left"==c.orient||"right"==c.orient)&&(i=f.bgY-b/2-k/2),"left"==c.orient?h=f.bgX-a-l:"right"==c.orient?h=f.bgX+l:"bottom"==c.orient&&(i=f.bgY+2*l),g.translate(h,i)}}),this.on("mouseout",function(){e&&(g.attr({visibility:"hidden"}),e=!1)}),g}};return a.setup=function(){return{orient:"top",all:!1,format:null}},a},"chart.widget.core"),jui.define("chart.widget.title",[],function(){var a=function(a,b,c){var d=0,e=0,f="middle";this.drawBefore=function(){e="bottom"==c.orient?a.area("y2")+a.padding("bottom")-20:"top"==c.orient?20:a.area("y")+a.area("height")/2,"center"==c.align?(d=a.area("x")+a.area("width")/2,f="middle"):"start"==c.align?(d=a.area("x"),f="start"):(d=a.area("x2"),f="end")},this.draw=function(){var b=a.svg.getTextRect(c.text),g=b.width/2,h=b.height/2,i=a.text({x:d+c.dx,y:e+c.dy,"text-anchor":f,"font-family":a.theme("fontFamily"),"font-size":a.theme("titleFontSize"),"font-weight":a.theme("titleFontWeight"),fill:a.theme("titleFontColor")},c.text);return"center"==c.orient&&("start"==c.align?i.rotate(-90,d+c.dx+g,e+c.dy+h):"end"==c.align&&i.rotate(90,d+c.dx-g,e+c.dy+h)),i}};return a.setup=function(){return{orient:"top",align:"center",text:"",dx:0,dy:0}},a},"chart.widget.core"),jui.define("chart.widget.legend",["util.base"],function(){var a=function(a,b,c){function d(a){if(c.filter){f[a.index]||(f[a.index]={});
for(var b=0;b<a.target.length;b++)f[a.index][a.target[b]]=!0}}function e(b){var c=[],d=b[0].index;for(var e in f[d])f[d][e]&&c.push(e);for(var g=0;g<b.length;g++)a.updateBrush(b[g].index,{target:c});a.isRender()||a.render(),a.emit("legend.filter",[c])}var f=[];this.getLegendIcon=function(b){for(var d=this,g=[],h=b.target,i=h.length,j=0;i>j;j++){var k=b.target[j],l=a.get("series",k).text||k,m=a.svg.getTextRect(l),n=Math.min(m.width,m.height),o=n,p=a.svg.group();p.append(a.svg.rect({x:0,y:0,width:n,height:o,fill:a.color(j,b)})),p.append(a.text({x:n+4,y:11,"font-family":a.theme("fontFamily"),"font-size":a.theme("legendFontSize"),fill:a.theme("legendFontColor"),"text-anchor":"start"},l)),g.push({icon:p,width:n+4+m.width+10,height:o+4}),c.filter&&!function(a,g){g.attr({cursor:"pointer"}),g.on("click",function(){f[b.index][a]?(g.attr({opacity:.7}),f[b.index][a]=!1):(g.attr({opacity:1}),f[b.index][a]=!0),e(c.brushSync?d.listBrush():[b])})}(k,p)}return g},this.draw=function(){var b=a.svg.group(),e=0,f=0,g=0,h=0,i=0,j=0;if(this.eachBrush(function(a,k){if(!c.brushSync||0==a){for(var l=this.getLegendIcon(k),m=0;m<l.length;m++)b.append(l[m].icon),l[m].icon.translate(e,f),"bottom"==c.orient||"top"==c.orient?(e+=l[m].width,g+=l[m].width,j<l[m].height&&(j=l[m].height)):(f+=l[m].height,h+=l[m].height,i<l[m].width&&(i=l[m].width));d(k)}}),"bottom"==c.orient||"top"==c.orient){var f="bottom"==c.orient?a.area("y2")+a.padding("bottom")-j:a.area("y")-a.padding("top");"start"==c.align?e=a.area("x"):"center"==c.align?e=a.area("x")+(a.area("width")/2-g/2):"end"==c.align&&(e=a.area("x2")-g)}else{var e="left"==c.orient?a.area("x")-a.padding("left"):a.area("x2")+a.padding("right")-i;"start"==c.align?f=a.area("y"):"center"==c.align?f=a.area("y")+(a.area("height")/2-h/2):"end"==c.align&&(f=a.area("y2")-h)}return b.translate(Math.floor(e),Math.floor(f)),b}};return a.setup=function(){return{orient:"bottom",align:"center",filter:!1,brushSync:!1}},a},"chart.widget.core"),jui.define("chart.widget.scroll",["util.base"],function(){var a=function(a,b){function c(c,g){function h(c){if(l){var h=n+c.bgX-m;0>h?h=0:h+d>a.area("width")&&(h=a.area("width")-d),g.translate(h,1),e=h;var k=h*j,o=0==k?0:Math.floor(k/i);h+d==a.area("width")&&(o+=1),b.zoom(o,o+f),a.isRender()||a.render()}}function k(){l&&(l=!1,m=0,n=0)}var l=!1,m=0,n=0;c.on("bg.mousedown",function(a){l&&g.element!=a.target||(l=!0,m=a.bgX,n=e)}),c.on("bg.mousemove",h),c.on("bg.mouseup",k),c.on("chart.mousemove",h),c.on("chart.mouseup",k)}var d=0,e=0,f=0,g=0,h=0,i=0,j=0;this.drawBefore=function(){g=b.origin.length,f=b.buffer,i=a.area("width")/f,h=i*g,j=h/a.area("width"),d=a.area("width")*(f/g)+2},this.draw=function(){var b=this;return a.svg.group({},function(){a.svg.rect({width:a.area("width"),height:7,fill:a.theme("scrollBackgroundColor")});var f=a.svg.rect({width:d,height:5,fill:a.theme("scrollThumbBackgroundColor"),stroke:a.theme("scrollThumbBorderColor"),cursor:"pointer","stroke-width":1}).translate(e,1);c(b,f)}).translate(a.area("x"),a.area("y2"))}};return a},"chart.widget.core"),jui.define("chart.widget.zoom",["util.base"],function(){var a=function(a,b){function c(c,d,f){function g(){if(i=!1,0!=k){var c=(k>0?j:j+k)-a.padding("left"),d=Math.floor(c/e),g=Math.ceil((c+Math.abs(k))/e);g>d&&(b.zoom(d,g),f.attr({visibility:"visible"}),a.isRender()||a.render()),h()}}function h(){i=!1,j=0,k=0,d.attr({width:0})}var i=!1,j=0,k=0;c.on("chart.mousedown",function(a){i||b.start>0||(i=!0,j=a.bgX)}),c.on("chart.mousemove",function(b){i&&(k=b.bgX-j,k>0?(d.attr({width:k}),d.translate(j,a.area("y"))):(d.attr({width:Math.abs(k)}),d.translate(j+k,a.area("y"))))}),c.on("chart.mouseup",g),c.on("bg.mouseup",g),c.on("bg.mouseout",g)}var d,e;this.drawBefore=function(){d=b.data.length<b.buffer&&b.data.length>0?b.data.length:b.buffer,e=a.area("width")/d},this.draw=function(){var d=this,e=a.area("width"),f=a.area("height"),g=12;return a.svg.group({},function(){var h=a.svg.rect({height:f,fill:a.theme("zoomBackgroundColor"),opacity:.3}),i=a.svg.group({visibility:"hidden"},function(){a.svg.rect({width:e,height:f,fill:a.theme("zoomFocusColor"),opacity:.2}),a.svg.group({cursor:"pointer"},function(){a.svg.circle({r:g,cx:e,cy:0,opacity:0}),a.svg.path({d:"M12,2C6.5,2,2,6.5,2,12c0,5.5,4.5,10,10,10s10-4.5,10-10C22,6.5,17.5,2,12,2z M16.9,15.5l-1.4,1.4L12,13.4l-3.5,3.5 l-1.4-1.4l3.5-3.5L7.1,8.5l1.4-1.4l3.5,3.5l3.5-3.5l1.4,1.4L13.4,12L16.9,15.5z",fill:a.theme("zoomFocusColor")}).translate(e-g,-g)}).on("click",function(){i.attr({visibility:"hidden"}),b.screen(1),a.isRender()||a.render()})}).translate(a.area("x"),a.area("y"));c(d,h,i)})}};return a},"chart.widget.core"),jui.define("chart.widget.cross",["util.base"],function(a){var b=function(b,c,d){function e(a,b,c){if(!o[a]){var d=document.createElementNS("http://www.w3.org/2000/svg","tspan");b.element.appendChild(d),o[a]=d}o[a].textContent=c}var f,g,h,i,j,k=this,l=50,m=18,n=l/10,o=[];this.drawBefore=function(){f=b.svg.group({visibility:"hidden"},function(){a.typeCheck("function",d.yFormat)&&(g=b.svg.line({x1:0,y1:0,x2:b.area("width"),y2:0,stroke:b.theme("crossBorderColor"),"stroke-width":b.theme("crossBorderWidth"),opacity:b.theme("crossBorderOpacity")}),j=b.svg.group({},function(){b.svg.polygon({fill:b.theme("crossBalloonBackgroundColor"),"fill-opacity":b.theme("crossBalloonBackgroundOpacity"),points:k.balloonPoints("left",l,m,n)}),b.svg.text({"font-family":b.theme("fontFamily"),"font-size":b.theme("crossBalloonFontSize"),fill:b.theme("crossBalloonFontColor"),"text-anchor":"middle",x:l/2,y:12})}).translate(-(l+n),0)),a.typeCheck("function",d.xFormat)&&(h=b.svg.line({x1:0,y1:0,x2:0,y2:b.area("height"),stroke:b.theme("crossBorderColor"),"stroke-width":b.theme("crossBorderWidth"),opacity:b.theme("crossBorderOpacity")}),i=b.svg.group({},function(){b.svg.polygon({fill:b.theme("crossBalloonBackgroundColor"),"fill-opacity":b.theme("crossBalloonBackgroundOpacity"),points:k.balloonPoints("bottom",l,m,n)}),b.svg.text({"font-family":b.theme("fontFamily"),"font-size":b.theme("crossBalloonFontSize"),fill:b.theme("crossBalloonFontColor"),"text-anchor":"middle",x:l/2,y:17})}).translate(0,b.area("height")+n))}).translate(b.area("x"),b.area("y"))},this.draw=function(){this.getBrush(0);return this.on("chart.mouseover",function(){f.attr({visibility:"visible"})}),this.on("chart.mouseout",function(){f.attr({visibility:"hidden"})}),this.on("chart.mousemove",function(a){var f=a.chartX+2,o=a.chartY+2;if(g&&g.attr({y1:o,y2:o}),h&&h.attr({x1:f,x2:f}),j){j.translate(-(l+n),o-m/2);var p=c.y.invert(o),q=d.yFormat.call(k.chart,p);e(0,j.get(1),q)}if(i){i.translate(f-l/2,b.area("height")+n);var p=c.x.invert(f),q=d.xFormat.call(k.chart,p);e(1,i.get(1),q)}}),f}};return b.setup=function(){return{xFormat:null,yFormat:null}},b},"chart.widget.core"),jui.defineUI("chartx.realtime",["jquery","util.base","util.time","chart.builder"],function(a,b,c,d){var e=function(){function e(a){for(var b=a.options,c=f(a),d=0;d<j.length&&j[d][b.axis.key].getTime()<=c[0].getTime();d++)j.splice(d,1);h.set("x",{domain:c}),h.update(j)}function f(a){var b=new Date,d=c.add(b,c.minutes,-a.options.period);return[d,b]}function g(b){var c={},d=["interval","period","axis"];for(var e in b.options)-1==a.inArray(e,d)&&(c[e]=b.options[e]);return c}var h=null,i=null,j=[];this.init=function(){var a=this.options,e=b.typeCheck("array",a.brush)?a.brush[0].target:a.brush.target,i=e;b.typeCheck("array",e)&&(i=function(a){return function(b){for(var c=[],d=0;d<a.length;d++)c.push(b[a[d]]);return c}}(e)),this.chart=d(this.selector,b.extend({axis:{x:{type:"date",domain:f(this),step:[c.minutes,a.axis.xstep],realtime:!0,format:a.axis.format,key:a.axis.key,line:a.axis.xline},y:{type:"range",domain:null!=a.axis.domain?a.axis.domain:i,step:a.axis.ystep,line:a.axis.yline},buffer:60*a.period}},g(this))),h=this.chart.get("axis",0),a.axis.data.length>0&&this.update(a.axis.data),this.start()},this.update=function(a){j=a,h.update(j)},this.clear=function(){j=[],h.update([])},this.reset=function(){this.clear(),this.stop()},this.append=function(a){var c=a;b.typeCheck("array",a)||(c=[a]),j=j.concat(c)},this.start=function(){if(null==i){var a=this;i=setInterval(function(){e(a)},1e3*this.options.interval)}},this.stop=function(){null!=i&&(clearInterval(i),i=null)}};return e.setup=function(){return{width:"100%",height:"100%",padding:{left:50,right:50,bottom:50,top:50},theme:"jennifer",style:{},series:{},brush:[],widget:[],axis:{domain:null,format:"hh:mm",key:"time",xstep:1,ystep:10,xline:!0,yline:!0,data:[]},interval:1,period:5}},e});